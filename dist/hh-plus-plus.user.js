// ==UserScript==
// @name            Hentai Heroes++ BDSM version webpack
// @description     Adding things here and there in the Hentai Heroes game. Also supports HHCore-based games such as GH and CxH.
// @version         1.0.0
// @match           https://*.hentaiheroes.com/*
// @match           https://nutaku.haremheroes.com/*
// @match           https://*.gayharem.com/*
// @match           https://*.comixharem.com/*
// @run-at          document-body
// @namespace       https://github.com/45026831/hh-plus-plus
// @updateURL       https://raw.githubusercontent.com/45026831/hh-plus-plus/main/dist/hh-plus-plus.meta.js
// @downloadURL     https://raw.githubusercontent.com/45026831/hh-plus-plus/main/dist/hh-plus-plus.user.js
// @grant           none
// @author          45026831(Numbers)
// ==/UserScript==

// The changelog can be found at https://raw.githubusercontent.com/45026831/hh-plus-plus/main/CHANGELOG

/**
 * SPECIAL THANKS:
 *
 * Code contributions
 * - Raphael
 * - 1121
 * - Sluimerstand
 * - shal
 * - Tom208
 * - test_anon
 * - BenBrazke
 * - randomfapper34
 * - Orange
 * - zoopokemon
 * - Ia1nn
 * - and many more over the years!
 *
 * Translations
 *
 * De:
 * - Bellanaris
 * - shal
 *
 * Fr:
 * - Tom208
 * - test_anon
 * - sygfried01
 *
 * Es:
 * - Vampi
 * - Sozan
 * - Reisen
 *
 * It:
 * - Daniel/Danutaku
 */

// WARNING: This file has been generated, DO NOT EDIT.

(()=>{"use strict";var a={971:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'.hh-plus-plus-config-button{position:absolute;right:15px;cursor:pointer;background-size:contain;background-image:var(--config-button-icon)}.hh-plus-plus-config-button:after{content:"++";position:absolute;width:auto;bottom:-3px;right:-5px;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;-moz-transform:rotate(0.05deg)}.hh-plus-plus-config-panel{display:none;height:470px;width:900px;position:absolute;top:70px;right:63px;z-index:100;border-style:solid;border-image-slice:1;border-width:4px;background:var(--config-panel-background);border-image-source:var(--config-border-image-source);box-shadow:var(--config-panel-box-shadow)}.hh-plus-plus-config-panel.shown{display:block}.hh-plus-plus-config-panel .group-panel{display:none;position:absolute;top:54px;width:889px;height:405px}.hh-plus-plus-config-panel .group-panel.shown{display:block}.hh-plus-plus-config-panel .group-panel .panel-contents{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;width:100%;height:auto;padding-left:10px;padding-right:10px;gap:10px}.hh-plus-plus-config-panel .config-setting{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;border-radius:6px;border:1px solid #aaa;padding:7px;font-size:14px;background:var(--config-setting-background)}.hh-plus-plus-config-panel .config-setting.has-subsettings{grid-row-end:span 2}.hh-plus-plus-config-panel .config-setting.enabled{border:1px solid var(--config-setting-border)}.hh-plus-plus-config-panel .base-setting{display:flex}.hh-plus-plus-config-panel .base-setting span{flex:1}.hh-plus-plus-config-panel .sub-settings{font-size:12px;margin-top:8px}.hh-plus-plus-config-panel .sub-settings label{display:flex;align-items:center;margin-bottom:6px}.hh-plus-plus-config-panel .sub-settings label span{flex:1}.hh-plus-plus-config-panel .sub-settings label input{margin-left:0}.hh-plus-plus-config-panel .sub-settings label input[disabled]{background-color:initial;box-shadow:unset;-webkit-box-shadow:unset}.close-config-panel{position:absolute;display:block;background-size:cover;background-image:var(--cross-icon);height:37px;width:41px;top:6px;right:6px;cursor:pointer}@media(min-width: 1026px){.hh-plus-plus-config-button{height:35px;width:35px;top:56px}.hh-plus-plus-config-button:after{font-size:26px;height:20px;line-height:20px}}@media(max-width: 1025px){.hh-plus-plus-config-button{height:64px;width:64px;top:85px}.hh-plus-plus-config-button:after{font-size:46px;height:40px;line-height:46px}}',""]);const i=t},400:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,".hideDefault [hero=xp],.hideDefault [hero=xp_sep],.hideDefault [hero=xp_max],[hero=soft_currency]{display:none}.scriptMoneyContainer{margin-left:-1px}@media(max-width: 1025px){.scriptMoneyContainer{position:absolute;top:2px;left:40px;font-size:16px}}",""]);const i=t},673:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,".slot.reward_sum{margin-right:5px;border:2px solid #fff}.slot.reward_sum img{display:inline;width:60%;height:60% !important;margin:0px !important}.shards_girl_ico.reward_sum{position:relative;float:none;width:40px;height:40px;margin-right:5px}.shards_girl_ico.reward_sum img{width:100%;height:100% !important;margin:0px !important}.shards_girl_ico.reward_sum .shards{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-moz-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:unset;-moz-justify-content:unset;-ms-justify-content:unset;justify-content:unset;-ms-flex-pack:unset;-webkit-align-content:unset;-moz-align-content:unset;-ms-align-content:unset;align-content:unset;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;-webkit-align-self:unset;-moz-align-self:unset;-ms-align-self:unset;align-self:unset;width:100%;height:20px;margin:-36px 0 0}.shards_girl_ico.reward_sum span.shard{top:45px;left:5px;width:20px;height:20px}.shards_girl_ico.reward_sum p{position:absolute;padding-left:20px;color:#80058b;text-shadow:1px 1px 0 #fff,-1px 1px 0 #fff,-1px -1px 0 #fff,1px -1px 0 #fff;top:-18px;font-size:8px;line-height:2;margin:40px 0 0 -4px}",""]);const i=t},217:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,".TrollsMenu{position:absolute;z-index:99;display:none;border-radius:0px 0px 8px 8px;background-color:rgba(0,0,0,.8);box-shadow:0 0 0 1px rgba(255,255,255,.73);letter-spacing:.22px;color:#fff;text-align:center;opacity:0;visibility:hidden;transition:opacity 400ms,visibility 400ms;grid-gap:7px;padding-top:5px;padding-bottom:5px;font-weight:var(--troll-menu-font-weight)}.energy_counter:hover>.TrollsMenu{opacity:1;display:grid;visibility:visible}.TrollsMenu a{color:#fff;text-decoration:none}#TrollsID a{color:#fff;text-decoration:none}#TrollsID a:hover{color:#fff7cc;text-decoration:underline}.eventTroll{color:#f70 !important}.eventTroll:hover{color:#fa0 !important}.eventTroll.common{color:#8d8e9f !important}.eventTroll.common:hover{color:#b4b5c9 !important}.eventTroll.rare{color:#23b56b !important}.eventTroll.rare:hover{color:#2bdf84 !important}.eventTroll.epic{color:#ffb244 !important}.eventTroll.epic:hover{color:#ffc97b !important}.eventTroll.legendary{color:#9370db !important}.eventTroll.legendary:hover{color:#b19cd9 !important}.mythicEventTroll{color:#ec0039 !important}.mythicEventTroll:hover{color:#ff003e !important}#contains_all{pointer-events:none}#contains_all>*{pointer-events:all}#pachinko_whole{pointer-events:none}#pachinko_whole .playing-zone{pointer-events:all}#content-unscaled{z-index:1}@media(max-width: 1025px){.TrollsMenu{width:500px;margin:62px 0 0 -96px;font-size:16px;line-height:22px;grid-template-columns:1fr 1fr 1fr;grid-auto-flow:row;padding-left:10px;padding-right:10px}.TrollsMenu>a{padding-top:10px;padding-bottom:10px}.TrollsMenu .villain_gem,.TrollsMenu .villain_item{height:18px;width:18px}.TrollsMenu .villain_rewards{display:block}}@media(min-width: 1026px){.TrollsMenu{width:200px;margin:40px 0 0 -40px;font-size:14px;line-height:18px}.TrollsMenu .villain_gem,.TrollsMenu .villain_item{height:16px;width:16px}.TrollsMenu .villain_rewards{display:inline}}",""]);const i=t},995:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,".gemStock{display:block;position:absolute;background-size:contain;height:34px;width:34px;z-index:30;background-image:var(--gem-stock-icon)}#shops_right #girls_list>.gemStock{top:-12px;left:38px}@media(max-width: 1025px){#shops_right #girls_list>.gemStock{top:-1px}}#harem_whole #harem_right>.gemStock{top:4px;right:200px}@media(max-width: 1025px){#harem_whole #harem_right>.gemStock{top:92px;right:62px}}.gemStock-table img{height:25px;width:25px}",""]);const i=t},31:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'.harem-info-panel{display:none;background-color:#080808f5;color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;font-weight:400;position:absolute;bottom:50px;left:10px;z-index:20;border-radius:5px;border-width:5px;border-style:solid;border-color:#cccccc42;padding:16px;grid-gap:10px;grid-template-columns:auto auto auto}.harem-info-panel .summary-block{display:inline-block;width:280px}.harem-info-panel .summary-block.general-summary{width:250px}.harem-info-panel.visible{display:grid}.harem-info-panel h1{font-size:1.2em}.harem-info-panel-toggle{display:block;position:absolute;height:32px;width:32px;background-size:contain;bottom:8px;left:6px}.harem-info-panel .to-max-label{margin-top:-6px}.harem-info-panel .summary-grid{display:grid;grid-gap:6px;list-style:none;padding-left:0px;margin-block-end:0px}.harem-info-panel .summary-grid li{display:inline-block;background:#cccccc42;border-radius:5px;padding-right:7px;line-height:20px;margin-left:10px}.harem-info-panel .summary-grid li>span{display:flex;justify-content:space-between;align-items:center;margin-left:-10px}.harem-info-panel .summary-grid .fire_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .nature_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .stone_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .sun_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .water_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .darkness_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .light_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid .psychic_element_icn{display:inline-block;width:20px;height:20px;background-size:contain}.harem-info-panel .summary-grid [carac]::before{width:20px;height:20px}.harem-info-panel .summary-grid .rarity-icon{display:inline-block;height:20px;width:20px;font-family:"Carter One","Alegreya Sans",Montserrat}.harem-info-panel .summary-grid .rarity-icon.starting{background-color:#ccc}.harem-info-panel .summary-grid .rarity-icon .initial{display:inline-block;width:100%;text-align:center;line-height:20px;position:absolute;top:0px;left:0px;vertical-align:middle;color:#fff;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;-moz-transform:rotate(0.05deg)}.harem-info-panel .summary-grid.caracs-summary{grid-template-columns:1fr 1fr 1fr}.harem-info-panel .summary-grid.rarity-summary{grid-auto-flow:column;grid-template-rows:auto auto}.harem-info-panel .summary-grid.elements-summary{grid-template-columns:1fr 1fr 1fr 1fr}.harem-info-panel .summary-grid.xp-aff-summary{grid-template-columns:1fr 1fr}.harem-info-panel .summary-grid.xp-aff-summary .xp-aff-label{display:inline-block;height:20px;padding-left:7px;font-family:"Carter One","Alegreya Sans",Montserrat}.harem-info-panel .summary-grid.xp-aff-summary .xp-aff-label.unlocked-scenes-icon{height:40px;width:40px;background-size:contain}.harem-info-panel .summary-grid.xp-aff-summary li{margin-left:0px}.harem-info-panel .summary-grid.xp-aff-summary li>span{margin-left:0px}.harem-info-panel .summary-grid.xp-aff-summary li>span>span:last-child{text-align:right}.harem-info-panel .summary-grid.salary-summary{grid-template-columns:1fr}.harem-info-panel .summary-grid.salary-summary .salary-label::before{height:40px;width:40px;background-size:contain}.harem-info-panel .summary-grid.salary-summary li{margin-left:0px}.harem-info-panel .summary-grid.salary-summary li>span{margin-left:0px}.harem-info-panel .summary-grid.upgrade-costs{grid-template-columns:1fr;margin-block-start:.3em;margin-block-end:.5em}.harem-info-panel .summary-grid.upgrade-costs .cost-value{text-align:right}.harem-info-panel .summary-grid.upgrade-costs .cost-value [cur]::before{height:18px;width:18px}.harem-info-panel .summary-grid.upgrade-costs .affection-label{display:inline-block;height:40px;width:40px;background-size:contain}.harem-info-panel .summary-grid.upgrade-costs li{margin-left:0px}.harem-info-panel .summary-grid.upgrade-costs li>span{margin-left:0px}.harem-info-panel .summary-grid.gems-summary,.harem-info-panel .summary-grid.gems-stock{grid-template-columns:1fr 1fr 1fr 1fr;margin-block-start:0px}.harem-info-panel .summary-grid.gems-summary .gem-icon,.harem-info-panel .summary-grid.gems-stock .gem-icon{display:inline-block;height:20px;width:20px;background-size:contain}.harem-info-panel .summary-grid.gems-summary{font-size:10px}.harem-info-panel .summary-grid.gems-stock{font-size:12px;margin-block-end:1em}.harem-info-panel .to-max-combi .upgrade-costs{margin-block-end:6px}.harem-info-panel .restock-info,.harem-info-panel .market-warning{color:#aaa;font-size:10px;margin-block-start:.3em}#harem_left{z-index:1}.harem-info-overlay-bg{display:none;width:100vw;height:100%;position:absolute;top:0px;left:0px;z-index:19}.harem-info-overlay-bg.visible{display:block}#harem_whole .WikiLinkDialogbox a{text-decoration:none;color:#24a0ff !important}#harem_right .WikiLink a{text-decoration:none}#harem_right .WikiLink a:hover h3{text-shadow:0 0 2px #000,0 0 4px #fff}.scene-costs-tooltip [cur]::before{height:18px;width:18px}',""]);const i=t},72:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'#leagues_middle .league_end_in{line-height:16px}.scriptLeagueInfo{display:block;float:right;margin-right:9px}@media(min-width: 1026px){.scriptLeagueInfo{font-size:13px}}@media(max-width: 1025px){.scriptLeagueInfo{position:absolute;right:300px;top:-20px;font-size:14px}}.scriptLeagueInfoIcon{position:relative;top:1px;display:inline-block;height:16px;width:16px;font-size:10px;border-radius:5px;margin-left:6px;margin-right:2px;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;-moz-transform:rotate(0.05deg)}.scriptLeagueInfoIcon:after{display:block;position:relative;top:2px;left:0;width:100%;text-align:center}.scriptLeagueInfoIcon.top4{background:var(--legendary-bg);background-size:cover}.scriptLeagueInfoIcon.top4:after{content:"4"}.scriptLeagueInfoIcon.top15{background-color:#ffb244}.scriptLeagueInfoIcon.top15:after{content:"15"}.scriptLeagueInfoIcon.top30{background-color:#23b56b}.scriptLeagueInfoIcon.top30:after{content:"30"}.hh_tooltip_new em{color:#fff}#leagues_middle .leagues_middle_header .leagues_girl_reward_container{right:9px;top:-35px}#beaten_opponents{position:absolute;padding-left:5px;padding-right:5px;background:none;border:none;cursor:pointer}@media(min-width: 1026px){#beaten_opponents{height:28px;top:-40px;left:10px}}@media(max-width: 1025px){#beaten_opponents{height:32px;z-index:1;right:517px}}#hide_beaten{position:relative}#hide_beaten img{width:auto}@media(min-width: 1026px){#hide_beaten img{height:20px}}@media(max-width: 1025px){#hide_beaten img{height:26px}}#leagues_middle>.leagues_table.lead_table>.lead_table_view table .square-avatar-wrapper .classLeague{position:absolute;display:flex;left:-38px;top:6px;width:100%;justify-content:flex-end}@media(max-width: 1025px){#leagues_middle>.leagues_table.lead_table>.lead_table_view table .square-avatar-wrapper .classLeague{left:-66px;top:17px}}#leagues_middle>.leagues_table.lead_table>.lead_table_view table .square-avatar-wrapper .classLeague img.theme-icon{flex:0 1 0%;height:17px;width:17px;border:none;position:initial}@media(max-width: 1025px){#leagues_middle>.leagues_table.lead_table>.lead_table_view table .square-avatar-wrapper .classLeague img.theme-icon{height:25px;width:25px}}#leagueStats table,#oldLeagueStats table{margin-left:auto;margin-right:auto}#leagueStats table tr td:first-child,#oldLeagueStats table tr td:first-child{text-align:right}#leagueStats table tr td:last-child,#oldLeagueStats table tr td:last-child{text-align:left}.individualDisplaySwitch{position:absolute}.individualDisplaySwitch input{display:none}.individualDisplaySwitch input+span{color:#d08467;padding:5px;cursor:pointer}.individualDisplaySwitch input:checked+span,.individualDisplaySwitch input:hover+span{color:#fff}@media(min-width: 1026px){.individualDisplaySwitch{top:-33px;left:90px}}@media(max-width: 1025px){.individualDisplaySwitch{top:10px;left:335px;font-size:16px}}',""]);const i=t},759:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'#shops label.equip_filter{background:transparent}#shops #inventory label.equip_filter{width:32px;position:absolute;top:-6px}label.equip_filter input{height:32px;width:32px;display:block;padding:0px}label.equip_filter::before{content:" ";display:block;position:absolute;height:100%;width:100%;background-position:center;background-size:24px;background-repeat:no-repeat;background-image:var(--filter-icon);pointer-events:none}.equip_filter_box{position:absolute;bottom:0px;left:-215px;width:200px;height:-moz-fit-content;height:fit-content;z-index:3;border-radius:8px 10px 10px 8px;background-color:#1e261e;box-shadow:rgba(255,255,255,.73) 0px 0px;padding:5px;border:1px solid #ffa23e}#shops #inventory .equip_filter_box label{background:transparent;width:auto;margin:0px}.grid-selector{width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.grid-selector:last-child{margin-bottom:0px}.grid-selector input{display:none}.grid-selector .selector-options{width:-moz-fit-content;width:fit-content;display:grid;grid-gap:2px}.grid-selector .selector-options img{height:32px;width:32px;margin:2px}.grid-selector .selector-options div{height:28px;width:28px;margin:4px;border-radius:5px}.grid-selector .clear-selector{width:-moz-fit-content;width:fit-content;margin-right:5px}.grid-selector .clear-selector img{height:36px;width:36px}#shops #inventory .grid-selector input:checked+label,#shops #inventory .grid-selector input:hover+label{background-color:#fff8}#inventory .armor .slot .favorite-toggle{position:absolute;display:none;height:32px;width:32px;top:0px;right:0px;background-size:22px;background-repeat:no-repeat;background-position:center;z-index:1;border-top-right-radius:5px;border-bottom-left-radius:5px}#inventory .armor .slot:hover .favorite-toggle[data-is-favorite=false],#inventory .armor .slot .favorite-toggle[data-is-favorite=true]{display:block}#inventory .armor .slot .favorite-toggle[data-is-favorite=false]{background-image:var(--star-icon-white);opacity:.7}#inventory .armor .slot .favorite-toggle[data-is-favorite=true]{background-color:rgba(30,38,30,.7);background-image:var(--star-icon-orange)}#inventory .armor .slot.filtered_out{display:none}',""]);const i=t},546:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'#arena_filter_box label.head-group{display:block;position:relative;left:-5px;z-index:15;margin-bottom:-8px;margin-top:-3px !important;padding-left:7px;font-size:14px;font-weight:400;letter-spacing:.22px;text-align:left !important;color:#ffb827;background:transparent;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000,-2px -2px 5px rgba(255,159,0,.4),2px -2px 5px rgba(255,159,0,.4),-2px 2px 5px rgba(255,159,0,.4),2px 2px 5px rgba(255,159,0,.4),0 0 10px rgba(255,159,0,.4)}#shops #girls_list .g1>div>.number{left:0 !important}#shops label.girl_filter{background:transparent}#shops label.girl_filter input{height:32px;width:32px;display:block;padding:0px}#shops label.girl_filter::before{content:" ";display:block;position:absolute;height:100%;width:100%;background-position:center;background-size:24px;background-repeat:no-repeat;background-image:var(--filter-icon);pointer-events:none}#arena_filter_box .button-group{display:flex}#shops label.clear_girl_filter{background:transparent}#shops label.clear_girl_filter input{height:36px;width:36px;display:block;padding:0px}#shops label.clear_girl_filter::before{content:" ";display:block;position:absolute;height:36px;width:36px;background-color:#fff;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:24px;mask-size:24px;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-image:var(--cross-icon);mask-image:var(--cross-icon);pointer-events:none}#arena_filter_box{position:absolute;left:-215px;width:200px;height:-moz-fit-content;height:fit-content;z-index:3;border-radius:8px 10px 10px 8px;background-color:#1e261e;box-shadow:rgba(255,255,255,.73) 0px 0px;padding:5px;border:1px solid #ffa23e}.team-selection{position:absolute;left:0px;bottom:-208px;width:400px;height:fit-content;border-radius:8px 10px 10px 8px;background-color:#1e261e;box-shadow:rgba(255,255,255,.73) 0px 0px;padding:5px;border:1px solid #ffa23e;z-index:10;padding-bottom:16px}.teams-grid-container{display:grid;grid-template-columns:auto auto auto auto;grid-row-gap:1rem;padding:.4rem .9rem .4rem .9rem;margin-right:-1rem}.teams-grid-container>img{border-radius:.4rem}.close-team-selection{position:absolute;display:block;background-size:cover;background-image:var(--cross-icon);height:32px;width:35px;top:-16px;right:-17px;cursor:pointer}[rel=select-team]{width:100%;height:36px;padding-top:5px}.theme-icons{position:absolute;bottom:-10px}.theme-icon{width:26px}@media(min-width: 1026px){label.girl_filter{position:absolute;left:-2px;top:-12px}#arena_filter_box{top:-230px}}@media(max-width: 1025px){label.girl_filter{position:absolute;left:-2px;top:0px}#arena_filter_box{top:-218px}}',""]);const i=t},829:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,"#shops #inventory button[rel=sell].hidden{display:none}#shops #inventory .hide-sell-toggle{width:-moz-fit-content;width:fit-content;padding:1px 14px}@media(min-width: 1026px){#shops #inventory .hide-sell-toggle{margin-top:-28px}}@media(max-width: 1025px){#shops #inventory .hide-sell-toggle{margin-top:0;position:absolute;bottom:-32px;right:24px}#shops #inventory .hide-sell-toggle input{height:22px;width:22px}}",""]);const i=t},849:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'.marketInfoIcon{height:18px;width:18px;border-radius:50%;cursor:help;background:var(--info-icon) center/65% 65% no-repeat,linear-gradient(180deg, #0af 0, #068 50%, #057 51%, #0af 100%)}#shops #equiped div.sub_block .hero_stats>[hero=carac1]{position:relative}#shops #equiped div.sub_block .hero_stats>[hero=carac1] .statInfo{position:absolute;left:-19px;top:6px}#shops #equiped div.sub_block .hero_stats>[hero=carac1] .statInfo:hover+.statToolTip{display:block}#shops #equiped div.sub_block .hero_stats>[hero=carac2]{position:relative}#shops #equiped div.sub_block .hero_stats>[hero=carac2] .statInfo{position:absolute;left:-19px;top:6px}#shops #equiped div.sub_block .hero_stats>[hero=carac2] .statInfo:hover+.statToolTip{display:block}#shops #equiped div.sub_block .hero_stats>[hero=carac3]{position:relative}#shops #equiped div.sub_block .hero_stats>[hero=carac3] .statInfo{position:absolute;left:-19px;top:6px}#shops #equiped div.sub_block .hero_stats>[hero=carac3] .statInfo:hover+.statToolTip{display:block}.inventoryInfo{position:absolute;top:0px;right:0px}#shops #equiped div.sub_block .hero_stats>div>.statToolTip,.inventoryToolTip{display:none;position:absolute;z-index:99;border:1px solid #a2c3d7;border-radius:8px;box-shadow:0px 0px 4px 0px rgba(0,0,0,.1);padding:3px 7px 4px 7px;background-color:#f2f2f2;font-size:11px;line-height:16px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;color:#057;font-weight:normal}.statToolTip{width:240px}.statToolTip table{width:100%}.statToolTip table tr td:last-child{text-align:right}.statToolTip table tr td:first-child{font-weight:bold}.inventoryToolTip{right:0px;bottom:220px;text-align:right}.inventoryInfo:hover+.inventoryToolTip{display:block}.inventoryToolTip b{font-weight:bold}.inventoryToolTip .hudSC_mix_icn{display:inline-block;height:17px;width:11px;background-size:11px}',""]);const i=t},334:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'#shops #girls_list .g1 .girl-ico>div .bar-wrap[rel=xp] .over,#shops #girls_list .g1 .girl-ico>div .bar-wrap[rel=aff] .over,#shops #girls_list .g1 .girl-ico>div .bar-wrap.maxed[rel=aff] div{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-weight:600;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;-moz-transform:rotate(0.05deg)}',""]);const i=t},433:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,"#missions .missions_wrap .mission_object.mission_entry.common{background:#ffffff20}#missions .missions_wrap .mission_object.mission_entry.rare{background:#32bc4f30}#missions .missions_wrap .mission_object.mission_entry.epic{background:#ffb24440}#missions .missions_wrap .mission_object.mission_entry.legendary{background:#6ebeff40}",""]);const i=t},348:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,".collect_img{display:none !important}",""]);const i=t},774:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,"a.availableGirl{text-decoration:none}a.availableGirl:hover{color:#fff}.availableGirls{font-size:12px;line-height:16px;text-shadow:1px 1px 0 #000,-1px 1px 0 #000,-1px -1px 0 #000,1px -1px 0 #000;overflow:hidden;height:82px;padding-left:20px;padding-right:20px}#playzone-replace-info .cover{height:226px}#playzone-replace-info .cover .pachinko_img{height:153px}#playzone-replace-info .cover .pachinko_img img{left:96px;margin-left:auto;margin-right:auto;width:215px}#playzone-replace-info .cover h3.shadow-text{top:118px}#playzone-replace-info .cover p{position:relative}#playzone-replace-info .graduation{font-size:10px}",""]);const i=t},520:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,'body>div>header{padding-top:8px}body>div>header img.new_notif{top:8px}body>div>header div.currency:nth-child(8){margin-left:438px}body>div>header div[rel=xp]{position:absolute;top:0;left:0;width:100%}body>div>header div[rel=xp] div[rel=level]{position:absolute;top:8px;left:116px;z-index:150;text-align:center;pointer-events:none}body>div>header div[rel=xp] div[rel=level] div[hero=level]{margin-top:9px}body>div>header div[rel=xp] .bar-wrapper{width:100%;height:11px;margin:0px;box-shadow:none;border-radius:0px;border:0}body>div>header div[rel=xp] .bar-wrapper .bar{height:100%}body>div>header div[rel=xp] .bar-wrapper .bar:after{height:100%;width:101%;left:0px}body>div>header div[rel=xp] .bar-wrapper .over{left:0px;right:0px;top:0px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:11px}body>div>header div[rel=xp] .bar-wrapper .over span{font-size:8px;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;-moz-transform:rotate(0.05deg)}#hh_comix body>div>header div[rel=xp] .bar-wrapper .over span{font-weight:normal}body>div>header .script-pop-timer{text-decoration:none;color:#fff;margin-top:22px;margin-left:-114px;width:114px}body>div>header .script-pop-timer .hh_bar{height:20px}body>div>header .script-pop-timer .backbar{width:114px;height:7px}body>div>header .script-pop-timer .text{font-size:9px;top:3px;pointer-events:none}body>div>header .script-booster-status{display:grid;grid-gap:3px;grid-template-columns:repeat(6, 1fr);margin-top:9px;margin-left:6px}body>div>header .script-booster-status .circular-progress{position:relative;height:24px;width:24px}body>div>header .script-booster-status .circular-progress .green{background-color:#01d10b}body>div>header .script-booster-status .circular-progress .yellow{background-color:#ffc400}body>div>header .script-booster-status .circular-progress .red{background-color:red}body>div>header .script-booster-status .circular-progress .slot{position:absolute;height:20px;width:20px;top:2px;left:2px;z-index:6}body>div>header .script-booster-status .circular-progress .slot.empty{cursor:inherit !important}body>div>header .script-booster-status .circular-progress .empty+.circle{box-shadow:none}body>div>header .script-booster-status .circular-progress .empty+.circle .circle-bar{background-color:transparent}body>div>header .script-booster-status .circular-progress .circle{height:100%;width:100%;border-radius:7px;box-shadow:0px 0px 5px #000}body>div>header .script-booster-status .circular-progress .circle-bar{position:absolute;height:100%;width:100%;background-color:#000000bf;clip-path:polygon(0% 0%, 0% 100%, 50% 100%, 50% 0%);border-radius:7px;overflow:hidden}body>div>header .script-booster-status .circular-progress .circle-bar .progress{position:absolute;height:200%;width:200%;top:-50%;left:-50%;clip-path:polygon(50% -50%, 150% -50%, 150% 150%, 50% 150%)}body>div>header .script-booster-status .circular-progress .circle-bar.right{transform:rotate(180deg);z-index:3}body>div>header .script-booster-status .circular-progress .circle-bar.left .progress{z-index:1}body>div>header div.currency{margin-left:6px;margin-top:4px;width:116px;height:36px}body>div>header div.currency .hudSC_mix_icn,body>div>header div.currency .hudHC_mix_icn{left:6px;right:auto;height:16px;width:16px;background-size:contain}body>div>header div.currency .hudSC_mix_icn{top:2px}body>div>header div.currency .hudHC_mix_icn{top:auto;bottom:2px}body>div>header div.currency div[hero=soft_currency],body>div>header div.currency div[hero=hard_currency],body>div>header div.currency .scriptMoneyContainer{position:absolute;left:28px;font-size:10px}body>div>header div.currency div[hero=soft_currency],body>div>header div.currency .scriptMoneyContainer{top:2px}body>div>header div.currency div[hero=hard_currency]{bottom:2px}body>div>header div.currency plus{top:0;right:-10px}body>div>header #blessings-button{margin-left:20px;margin-top:4px}body>div>header>div.energy_counter a{text-decoration:none}body>div>header>div.energy_counter[type=quest] .bar-wrapper,body>div>header>div.energy_counter[type=fight] .bar-wrapper{width:87px;height:36px;margin:4px 0 0 18px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .bar:after,body>div>header>div.energy_counter[type=fight] .bar-wrapper .bar:after{height:100%;left:-1px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .over,body>div>header>div.energy_counter[type=fight] .bar-wrapper .over{flex-direction:column;align-content:flex-start;align-items:flex-start;justify-content:flex-start;padding-left:11px;padding-top:1px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .over .energy_counter_amount,body>div>header>div.energy_counter[type=fight] .bar-wrapper .over .energy_counter_amount{font-size:8px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .over .energy_counter_amount span[energy],body>div>header>div.energy_counter[type=fight] .bar-wrapper .over .energy_counter_amount span[energy]{font-size:12px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .over [rel=count_txt],body>div>header>div.energy_counter[type=fight] .bar-wrapper .over [rel=count_txt]{font-size:7px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .over [rel=count_txt]>[rel=count],body>div>header>div.energy_counter[type=fight] .bar-wrapper .over [rel=count_txt]>[rel=count]{font-size:7px}body>div>header>div.energy_counter[type=quest] .bar-wrapper .over span,body>div>header>div.energy_counter[type=fight] .bar-wrapper .over span{font-size:8px}body>div>header>div.energy_counter plus{right:-14px}body>div>header>div.energy_counter .energy_counter_icon span{position:absolute;top:9px;left:16px;z-index:36}body>div>header>div.energy_counter .energy_counter_icon span.hudKiss_mix_icn,body>div>header>div.energy_counter .energy_counter_icon span.hudWorship_mix_icn{height:20px;width:20px;background-size:contain;top:4px}body>div>header>div.energy_counter .energy_counter_icon span.hudChallenge_mix_icn{height:20px;width:20px;background-size:contain;background-position:center;background-repeat:no-repeat;background-image:var(--challenge-token-icon);filter:drop-shadow(0px 2px 0px #000000bf);left:-123px;top:23px}body>div>header>div.energy_counter .energy_counter_icon span.hudBattlePts_mix_icn{left:2px}body>div>header>div.energy_counter .energy_counter_icon span.hudEnergy_mix_icn{left:8px}body>div>header>div.energy_counter .energy_counter_icon span.hudWorship_mix_icn{left:2px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper,body>div>header>div.energy_counter[type=challenge] .bar-wrapper,body>div>header>div.energy_counter[type=worship] .bar-wrapper{width:114px;height:15px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper .bar:after,body>div>header>div.energy_counter[type=challenge] .bar-wrapper .bar:after,body>div>header>div.energy_counter[type=worship] .bar-wrapper .bar:after{left:3px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper .over,body>div>header>div.energy_counter[type=challenge] .bar-wrapper .over,body>div>header>div.energy_counter[type=worship] .bar-wrapper .over{font-size:10px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper .over span,body>div>header>div.energy_counter[type=challenge] .bar-wrapper .over span,body>div>header>div.energy_counter[type=worship] .bar-wrapper .over span{font-size:10px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper .over [rel=count_txt],body>div>header>div.energy_counter[type=challenge] .bar-wrapper .over [rel=count_txt],body>div>header>div.energy_counter[type=worship] .bar-wrapper .over [rel=count_txt]{font-size:8px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper .over [rel=count_txt]>[rel=count],body>div>header>div.energy_counter[type=challenge] .bar-wrapper .over [rel=count_txt]>[rel=count],body>div>header>div.energy_counter[type=worship] .bar-wrapper .over [rel=count_txt]>[rel=count]{font-size:8px}body>div>header>div.energy_counter[type=kiss] .bar-wrapper,body>div>header>div.energy_counter[type=worship] .bar-wrapper{margin-top:6px}body>div>header>div.energy_counter[type=worship] .bar-wrapper{margin-left:11px}body>div>header>div.energy_counter[type=challenge] .bar-wrapper{margin-left:-114px;margin-top:24px}body>div>header>div.script-bar-spacer{margin:12px 0 0 27px}body>div>header>div.script-bar-spacer[type=kiss],body>div>header>div.script-bar-spacer[type=challenge],body>div>header>div.script-bar-spacer[type=worship]{width:114px;height:15px}body>div>header>div.script-bar-spacer[type=kiss],body>div>header>div.script-bar-spacer[type=worship]{margin-top:6px}body>div>header>div.script-bar-spacer[type=worship]{margin-left:11px}body>div>header>div.script-bar-spacer[type=challenge]{margin-left:-114px;margin-top:24px}#contains_all>nav>[rel=open]{top:12px}body#hh_comix>div>header div[rel=xp] div[rel=level] div[hero=level]{margin-top:17px !important}body#hh_comix>div>header div[rel=xp] .bar-wrapper .over span{font-weight:400 !important}@media(min-width: 1026px){#homepage .social_links{margin-top:-30px}}.script-booster-status-item .season_rewards_tier_info,.script-booster-status-item .item-price{display:none}#contests>div>div.right_part img{height:286px;margin-top:-74px}@media(max-width: 1025px){body>div>header>a.hh_logo,body>div>header a#chat_btn,body>div>header>div[rel=avatar]{margin-top:4px}body>div>header div[rel=xp] div[rel=level]{left:154px;top:4px}body>div>header div[rel=xp] div[rel=level]>div{flex-direction:column}body>div>header div[rel=xp] div[rel=level] div[hero=level]{margin-top:32px}body>div>header plus{top:4px;border-radius:8px;width:44px;height:60px;right:-20px}body>div>header plus[disabled]{border-radius:8px}body>div>header plus .hudPlus_mix_icn{width:24px;height:24px;background-size:contain}body>div>header div.energy_counter[type=quest] .energy_counter_icon span.hudEnergy_mix_icn,body>div>header div.energy_counter[type=quest] .energy_counter_icon span.hudBattlePts_mix_icn,body>div>header div.energy_counter[type=fight] .energy_counter_icon span.hudEnergy_mix_icn,body>div>header div.energy_counter[type=fight] .energy_counter_icon span.hudBattlePts_mix_icn{left:8px;top:8px}body>div>header div.energy_counter[type=quest] .energy_counter_icon span.hudBattlePts_mix_icn,body>div>header div.energy_counter[type=fight] .energy_counter_icon span.hudBattlePts_mix_icn{left:0px}body>div>header div.energy_counter[type=quest] .bar-wrapper,body>div>header div.energy_counter[type=fight] .bar-wrapper{height:60px;width:80px;margin-left:14px}body>div>header div.energy_counter[type=quest] .bar-wrapper .bar:after,body>div>header div.energy_counter[type=fight] .bar-wrapper .bar:after{left:-8px}body>div>header div.energy_counter[type=quest] .bar-wrapper .over,body>div>header div.energy_counter[type=fight] .bar-wrapper .over{padding-left:4px;margin-left:2px;padding-top:2px}body>div>header div.energy_counter[type=quest] .bar-wrapper .over .energy_counter_amount,body>div>header div.energy_counter[type=fight] .bar-wrapper .over .energy_counter_amount{margin-left:8px}body>div>header div.energy_counter[type=quest] .bar-wrapper .over .energy_counter_amount span[energy],body>div>header div.energy_counter[type=fight] .bar-wrapper .over .energy_counter_amount span[energy]{display:block;font-size:16px}body>div>header div.energy_counter[type=quest] .bar-wrapper .over [rel=count_txt],body>div>header div.energy_counter[type=fight] .bar-wrapper .over [rel=count_txt]{margin-top:6px}body>div>header div.energy_counter[type=quest] .bar-wrapper .over [rel=count_txt] [rel=count],body>div>header div.energy_counter[type=fight] .bar-wrapper .over [rel=count_txt] [rel=count]{display:block;font-size:10px}body>div>header div.energy_counter .energy_counter_icon span.hudKiss_mix_icn{top:9px;left:20px}body>div>header div.energy_counter .energy_counter_icon span.hudWorship_mix_icn{top:9px;left:6px}body>div>header div.energy_counter .energy_counter_icon span.hudChallenge_mix_icn{left:-119px;top:40px}body>div>header div.energy_counter .energy_counter_icon span.hudBattlePts_mix_icn{left:0px;top:8px}body>div>header div.energy_counter .energy_counter_icon span.hudEnergy_mix_icn{left:8px;top:8px}body>div>header div.energy_counter[type=kiss] .bar-wrapper,body>div>header div.energy_counter[type=challenge] .bar-wrapper,body>div>header div.energy_counter[type=worship] .bar-wrapper{height:26px}body>div>header div.energy_counter[type=kiss] .bar-wrapper .bar:after,body>div>header div.energy_counter[type=challenge] .bar-wrapper .bar:after,body>div>header div.energy_counter[type=worship] .bar-wrapper .bar:after{left:-2px;width:calc(100% + 9px)}body>div>header div.energy_counter[type=kiss] .bar-wrapper{margin-left:26px}body>div>header div.energy_counter[type=challenge] .bar-wrapper{margin-top:36px}body>div>header .script-pop-timer{margin-top:42px}body>div>header .script-booster-status{grid-template-columns:1fr 1fr 1fr}body>div>header div.currency{height:60px}body>div>header div.currency div[hero=soft_currency],body>div>header div.currency .scriptMoneyContainer,body>div>header div.currency .hudSC_mix_icn{top:10px}body>div>header div.currency div[hero=hard_currency],body>div>header div.currency .hudHC_mix_icn{bottom:10px}body>div>header img.new_notif.daily-reward-notif{left:24px}body>div>header #blessings-button{height:60px;border-radius:8px}#contains_all>nav>[rel=open]{height:60px;width:60px}#homepage .social_links{display:grid;grid-template-columns:1fr 1fr}#homepage .social_links .redirect.comix,#homepage .social_links .redirect.gay,#homepage .social_links .redirect.hentai{margin-left:0}body#hh_comix>div>header div[rel=xp] div[rel=level]{top:8px}body#hh_comix>div>header div[rel=xp] div[rel=level] div[hero=level]{margin-top:40px !important}}',""]);const i=t},59:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(81),t=a.n(s),s=a(645),t=a.n(s)()(t());t.push([e.id,".scriptSeasonStatsTooltip{font-size:12px;color:#fff}.scriptSeasonStatsTooltip table{margin-left:auto;margin-right:auto}.scriptSeasonStatsTooltip table tr td:first-child{text-align:right}.scriptSeasonStatsTooltip table tr td:last-child{text-align:left}.scriptSeasonStats{color:#8ec3ff;font-size:16px}#seasons_tab_title .scriptSeasonStats{margin-left:54px}.hero .scriptSeasonStats{margin-left:15px}",""]);const i=t},645:e=>{e.exports=function(s){var d=[];return d.toString=function(){return this.map(function(e){var t="",a=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),a&&(t+="@layer".concat(0<e[5].length?" ".concat(e[5]):""," {")),t+=s(e),a&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},d.i=function(e,t,a,s,i){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var n=0;n<this.length;n++){var o=this[n][0];null!=o&&(r[o]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);a&&r[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(0<c[5].length?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),t&&(c[2]&&(c[1]="@media ".concat(c[2]," {").concat(c[1],"}")),c[2]=t),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),d.push(c))}},d}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var c=[];function d(e){for(var t=-1,a=0;a<c.length;a++)if(c[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},s=[],i=0;i<e.length;i++){var r=e[i],n=t.base?r[0]+t.base:r[0],o=a[n]||0,l="".concat(n," ").concat(o);a[n]=o+1;o=d(l),r={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};-1!==o?(c[o].references++,c[o].updater(r)):(r=function(t,e){var a=e.domAPI(e);return a.update(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer||a.update(t=e):a.remove()}}(r,t),t.byIndex=i,c.splice(i,0,{identifier:l,updater:r,references:1})),s.push(l)}return s}e.exports=function(e,r){var n=o(e=e||[],r=r||{});return function(e){e=e||[];for(var t=0;t<n.length;t++){var a=d(n[t]);c[a].references--}for(var e=o(e,r),s=0;s<n.length;s++){var i=d(n[s]);0===c[i].references&&(c[i].updater(),c.splice(i,1))}n=e}}},569:e=>{var a={};e.exports=function(e,t){if(!(e=function(e){if(void 0===a[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}a[e]=t}return a[e]}(e)))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(t)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(t){var a=t.insertStyleElement(t);return{update:function(e){!function(e,t,a){var s="";a.supports&&(s+="@supports (".concat(a.supports,") {")),a.media&&(s+="@media ".concat(a.media," {"));var i=void 0!==a.layer;i&&(s+="@layer".concat(0<a.layer.length?" ".concat(a.layer):""," {")),s+=a.css,i&&(s+="}"),a.media&&(s+="}"),a.supports&&(s+="}"),(a=a.sourceMap)&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(s,e,t.options)}(a,t,e)},remove:function(){var e;null!==(e=a).parentNode&&e.parentNode.removeChild(e)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},s={};function _i(e){var t=s[e];if(void 0!==t)return t.exports;t=s[e]={id:e,exports:{}};return a[e](t,t.exports,_i),t.exports}_i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return _i.d(t,{a:t}),t},_i.d=(e,t)=>{for(var a in t)_i.o(t,a)&&!_i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},_i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),_i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{var e={};_i.r(e),_i.d(e,{common:()=>we,config:()=>Se,contestSummary:()=>De,harem:()=>Me,league:()=>Ae,market:()=>Ee,marketGirlsFilter:()=>Ce,marketHideSellButton:()=>Ie,marketXPAff:()=>Le,pachinkoNames:()=>Ge,resourceBars:()=>Re,seasonStats:()=>Ne,stConfig:()=>$e,villain:()=>ke,xpMoney:()=>Te});var t={};_i.r(t),_i.d(t,{config:()=>Pe,contestSummary:()=>Fe,market:()=>je,marketGirlsFilter:()=>Ue,pachinkoNames:()=>Be,seasonStats:()=>ze,stConfig:()=>Oe,villain:()=>He});var a={};_i.r(a),_i.d(a,{config:()=>qe,contestSummary:()=>Qe,market:()=>We,marketGirlsFilter:()=>Ke,pachinkoNames:()=>Xe,seasonStats:()=>Ye,stConfig:()=>Ze,villain:()=>Ve});var s={};_i.r(s),_i.d(s,{config:()=>Je,contestSummary:()=>nt,market:()=>at,marketGirlsFilter:()=>st,pachinkoNames:()=>rt,seasonStats:()=>it,stConfig:()=>et,villain:()=>tt});var i={};_i.r(i),_i.d(i,{config:()=>ot,contestSummary:()=>ht,market:()=>dt,marketGirlsFilter:()=>pt,pachinkoNames:()=>gt,seasonStats:()=>ut,stConfig:()=>lt,villain:()=>ct});const r={HH:{homeDark:"rgba(32,3,7,.9)",homeBorder:"#ffb827",panelBorderGradient:"linear-gradient(180deg, #ffa23e, #c41b53)",panelBackground:"linear-gradient(to top,#572332 0,#572332 1%,#2c1e1c 100%)",panelInset:"inset 0 0 40px 15px #662034"},GH:{homeDark:"rgba(32,3,7,.9)",homeBorder:"#69daff",panelBorderGradient:"linear-gradient(180deg,#6a8cff,#8966ff)",panelBackground:"linear-gradient(to top,#84a 0,#2a2435 99%,#2a2435 100%)",panelInset:"inset 0 0 40px 15px rgb(131 55 245 / 60%)"},CxH:{homeDark:"#0f0b1d",homeBorder:"#33a7ff",panelBorderGradient:"linear-gradient(180deg, #33a7ff, #33a7ff)",panelBackground:"linear-gradient(180deg,#0f0b1d 0,#0d5c9d 90%,#0d5c9d 100%)",panelInset:"inset 0 0 40px 15px none"}};var n=e=>`HHPlusPlus${e}`;const f={CONFIG:n("Config"),GIRL_DICTIONARY:n("GirlDictionary"),TEAMS_DICTIONARY:n("TeamsDictionary"),EVENT_VILLAINS:n("EventVillains"),EVENT_TIME:n("EventTime"),MYTHIC_EVENT_VILLAINS:n("MythicEventVillains"),MYTHIC_EVENT_TIME:n("MythicEventTime"),SEASON_END_TIME:n("SeasonEndTime"),SEASON_STATS:n("SeasonStats"),OLD_SEASON_STATS:n("OldSeasonStats"),MARKET_INFO:n("MarketInfo"),MARKET_GIRLS_FILTER:n("ActiveMarketGirlFilter"),EQUIP_FAVORITES:n("EquipFavorites"),SELL_BUTTON_HIDDEN:n("SellButtonHidden"),LEAGUE_PLAYERS:n("LeaguePlayers"),LEAGUE_POINT_HISTORY:n("LeaguePointHistory"),LEAGUE_RESULTS:n("LeagueResults"),LEAGUE_SCORE:n("LeagueScore"),LEAGUE_TIME:n("LeagueTime"),LEAGUE_UNKNOWN:n("LeagueUnknown"),LEAGUE_PLAYERS_OLD:n("LeaguePlayersOld"),LEAGUE_POINT_HISTORY_OLD:n("LeaguePointHistoryOld"),LEAGUE_RESULTS_OLD:n("LeagueResultsOld"),LEAGUE_SCORE_OLD:n("LeagueScoreOld"),LEAGUE_TIME_OLD:n("LeagueTimeOld"),LEAGUE_UNKNOWN_OLD:n("LeagueUnknownOld"),FOUGHT_OPPONENTS_HIDDEN:n("FoughtOpponentsHidden"),TABLE_SHOW_INDIVIDUAL:n("TableShowIndividual"),TRACKED_TIMES:n("TrackedTimes"),BOOSTER_STATUS:n("BoosterStatus"),CLUB_STATUS:n("ClubStatus"),AVAILABLE_FEATURES:n("AvailableFeatures"),SIDEQUEST_STATUS:n("SidequestStatus")};let o,l,c,d,p,u,g,h,m=!0;const b=[];class y{static getHost(){return window.location.host}static getCDNHost(){return p=p||IMAGES_URL,p}static getPathname(){return window.location.pathname}static isCurrentPage(e){return y.getPathname().includes(e)}static hasSearch(e){return window.location.search.includes(e)}static isHH(){return void 0===o&&(o=!(y.isGH()||y.isCxH())),o}static isGH(){return void 0===l&&(l=["www.gayharem.com","nutaku.gayharem.com"].includes(y.getHost())),l}static isCxH(){return void 0===c&&(c=["www.comixharem.com","nutaku.comixharem.com"].includes(y.getHost())),c}static getGameKey(){return y.isHH()?"HH":y.isGH()?"GH":y.isCxH()?"CxH":void 0}static isNutakuKobans(){return void 0===d&&(d="nutaku"===HH_UNIVERSE),d}static $(e){return"string"==typeof e?window.$(e.replace(/\n/g,"").replace(/ {4}/g,"")):window.$(e)}static mediaMobile(e){return`@media only screen and (max-width: 1025px) {${e}}`}static mediaDesktop(e){return`@media only screen and (min-width: 1026px) {${e}}`}static getGirlDictionary(){var e;return u||(e=y.lsGet(f.GIRL_DICTIONARY),u=e?new Map(e):new Map),u}static setGirlDictionary(e){u=e,y.lsSet(f.GIRL_DICTIONARY,Array.from(u))}static getTeamsDictionary(){return g=g||y.lsGet(f.TEAMS_DICTIONARY),g}static setTeamsDictionary(e){g=e,y.lsSet(f.TEAMS_DICTIONARY,g)}static onAjaxResponse(i,r){$(document).ajaxComplete((e,t,a)=>{if(~a.data.search(i)&&t.responseText.length){var s=JSON.parse(t.responseText);if(s&&s.success)return r(s,a,t,e)}})}static lsGetRaw(e){return localStorage.getItem(e)}static lsGet(e){return JSON.parse(y.lsGetRaw(e))}static lsSetRaw(e,t){return localStorage.setItem(e,t)}static lsSet(e,t){return y.lsSetRaw(e,JSON.stringify(t))}static lsRm(e){return localStorage.removeItem(e)}static getWikiLink(e,t){e=e.replaceAll("/","-"),e="fr"===t?e.replaceAll("’","-"):e.replaceAll("’","");let a;return a=y.isGH()?`https://harem-battle.club/wiki/Gay-Harem/GH:${e}`:"fr"===t?`http://hentaiheroes.wikidot.com/${e}`:`https://harem-battle.club/wiki/Harem-Heroes/HH:${e}`,a}static getAwakeningThreshold(){if(!h&&m){let e,t,a,s;if(window.girls_requirement_amount){const r=Object.keys(girls_requirement_amount);e=r.find(e=>girls_requirement_amount[e]>high_level_girl_owned[e]),e&&(t=high_level_girl_owned[e],a=girls_requirement_amount[e])}else{var i;!window.awakening_requirements||0<(i=awakening_requirements.findIndex(({girls_required:e},t)=>e>high_level_girl_owned[t]))&&(e=awakening_requirements[i-1].cap_level,t=high_level_girl_owned[i],a=awakening_requirements[i].girls_required,s=i)}e?h={currentThreshold:e,currentThresholdOwned:t,currentThresholdMin:a,awakeningLevel:s}:m=!1}return h}static defer(e){b.push(e)}static runDeferred(){$(document).ready(()=>{b.forEach(e=>{try{e()}catch(e){console.error("Error in deferred function",e)}}),b.splice(0,b.length)})}}const T=y;let v,_;const x=e=>{e&&e.data&&e.data.shards&&(v=T.getGirlDictionary(),e.data.shards.forEach(({id_girl:e,value:t})=>{e=`${e}`;const a=v.get(e)||{};a.shards=Math.min(t,100),v.set(e,a)}),T.setGirlDictionary(v))},w=e=>{var e=e["rewards"];x(e)},S=e=>{const t=e["rewards"];t&&t.forEach(x)},k=e=>{var e=e["rewards"];if(e){const t=e["list"];t&&t.forEach(x)}};class E{static collect(){T.defer(()=>{_=!1,v=T.getGirlDictionary(),T.isCurrentPage("harem")&&E.collectFromHarem(),T.isCurrentPage("event")&&E.collectFromEventWidget(),T.isCurrentPage("clubs")&&E.collectFromClubChamp(),T.isCurrentPage("battle")&&E.collectFromBattleResult(),T.isCurrentPage("pachinko")&&E.collectFromPachinkoRewards(),T.isCurrentPage("activities")&&E.collectFromContestRewards(),T.isCurrentPage("champion")&&E.collectFromChampions(),T.isCurrentPage("home")&&E.collectFromRewardsQueue(),T.isCurrentPage("season")&&E.collectFromSeasons(),T.isCurrentPage("tower-of-fame")&&E.collectFromLeague(),_&&T.setGirlDictionary(v)})}static collectFromHarem(){$("#harem_whole").length&&Object.entries(girlsDataList).forEach(([e,t])=>{var{name:a,shards:s,class:i,rarity:r,graded:t}=t,t={name:a,shards:void 0!==s?s:100,class:parseInt(i,10),rarity:r,graded:t};a&&(v.set(e,t),_=!0)})}static collectFromEventWidget(){eventGirls.forEach(({id_girl:e,name:t,shards:a,class:s,rarity:i})=>{void 0===a&&(a=100),t&&(v.set(e,{name:t,shards:a,class:parseInt(s,10),rarity:i}),_=!0)})}static collectFromClubChamp(){var e,t,a,s,i;window.clubChampionsData&&(i=clubChampionsData.reward["shards"],i&&i.length&&({id_girl:e,name:t,previous_value:a,girl_class:s,rarity:i}=i[0],v.set(e,{name:t,shards:a,class:parseInt(s,10),rarity:i}),_=!0))}static collectFromBattleResult(){T.onAjaxResponse(/action=do_(league|season|troll)_battles/i,w)}static collectFromPachinkoRewards(){T.onAjaxResponse(/action=play/i,w)}static collectFromContestRewards(){T.onAjaxResponse(/action=give_reward/i,w)}static collectFromChampions(){T.onAjaxResponse(/class=TeamBattle/i,e=>{var e=e["end"];e&&w(e)})}static collectFromRewardsQueue(){T.onAjaxResponse(/action=process_rewards_queue/i,S)}static collectFromSeasons(){T.onAjaxResponse(/action=claim/i,w)}static collectFromLeague(){T.onAjaxResponse(/action=claim_rewards/i,k)}}const C=E;const L=class{static collect(){T.isCurrentPage("teams")&&T.defer(()=>{const n={},o=[];$(".team-slot-container[data-is-empty=]").each((e,t)=>{var a=$(t).data("id-team"),s=$(t).find("img").attr("src"),i=$(t).find(".team-slot-themes-container img").map((e,t)=>$(t).attr("src")).toArray();const r=$(t).attr("class").replace(/\s+/g," ").split(" ");t=["mythic","legendary","epic","rare","common","starting"].find(e=>r.includes(e));n[a]={teamId:a,icon:s,iconRarity:t,themeIcons:i},o.push(a)}),o.forEach(e=>{const t=$(`.team-info-girls-container[data-id-team=${e}]`),a=[];t.find(".team-member-container").each((e,t)=>{t=$(t).data("girl-id");t&&a.push(`${t}`)}),n[e].girls=a});var e={teamsDict:n,teamIds:o};T.setTeamsDictionary(e)})}};class I{static collect(){T.defer(()=>{I.clean(),T.hasSearch("tab=event")&&I.collectFromEvent(f.EVENT_TIME,f.EVENT_VILLAINS),T.hasSearch("tab=mythic_event")&&I.collectFromEvent(f.MYTHIC_EVENT_TIME,f.MYTHIC_EVENT_VILLAINS)})}static clean(){var e=T.lsGetRaw(f.EVENT_TIME)||0,t=T.lsGetRaw(f.MYTHIC_EVENT_TIME)||0,a=server_now_ts;e<a&&(T.lsRm(f.EVENT_VILLAINS),T.lsRm(f.EVENT_TIME)),t<a&&(T.lsRm(f.MYTHIC_EVENT_VILLAINS),T.lsRm(f.MYTHIC_EVENT_TIME))}static collectFromEvent(e,t){var a=$("#contains_all #events .nc-panel-header .nc-pull-right #timer").data("seconds-until-event-end"),a=server_now_ts+a;T.lsSetRaw(e,a);const i=[];eventGirls.forEach(e=>{var{id_girl:t,source:a,rarity:e}=e;if("event_troll"===a.name){const s=a.anchor_source.url;a=s.match(/id_opponent=([0-9]+)/);a&&(a=a[1],i.push({id:t,troll:a,rarity:e}))}}),T.lsSet(t,i)}}const M=I,A={fights:0,victories:0,losses:0,won_mojo:0,lost_mojo:0};class R{static collect(){T.defer(()=>{R.migrate(),T.isCurrentPage("season")&&!T.isCurrentPage("season-arena")&&R.rollOverStats(),(T.isCurrentPage("season-arena")||T.isCurrentPage("battle"))&&R.collectFromBattle()})}static migrate(){var e;T.lsGetRaw(f.SEASON_STATS)||(e=T.lsGetRaw("SeasonStats"))&&T.lsSetRaw(f.SEASON_STATS,e)}static collectFromBattle(){T.onAjaxResponse(/action=do_season_battles/i,e=>{const t=e["rewards"];if(t&&t.data&&t.data.rewards){e=t.data.rewards.find(({type:e})=>"victory_points"===e);if(e){const a=T.lsGet(f.SEASON_STATS)||{...A};e=parseInt($(e.value).text(),10);a.fights+=1,0<e?(a.victories+=1,a.won_mojo+=e):(a.losses+=1,a.lost_mojo-=e),T.lsSet(f.SEASON_STATS,a)}}})}static rollOverStats(){var e,t=server_now_ts;(e=parseInt(T.lsGetRaw(f.SEASON_END_TIME)||"0",10))<t&&(T.lsSetRaw(f.OLD_SEASON_STATS,T.lsGetRaw(f.SEASON_STATS)),T.lsSet(f.SEASON_STATS,A),e=t+season_sec_untill_event_end,T.lsSetRaw(f.SEASON_END_TIME,e))}}const N=R,G=e=>{var t=(e=>{let t=0;return e<2e3?t=5+2*e:e<4e3?t=4005+4*(e-2e3):e<6e3?t=12005+6*(e-4e3):e<8e3?t=24005+8*(e-6e3):e<1e4?t=40005+10*(e-8e3):e<12e3?t=60005+12*(e-1e4):e<14e3?t=84005+14*(e-12e3):e<16e3&&(t=112005+16*(e-14e3)),t})(e);let a=0;return e<2e3?a=(7+t)/2*e:e<4e3?a=4012e3+(4009+t)/2*(e-2e3):e<6e3?a=20026e3+(12011+t)/2*(e-4e3):e<8e3?a=56042e3+(24013+t)/2*(e-6e3):e<1e4?a=12006e4+(40015+t)/2*(e-8e3):e<12e3?a=22008e4+(60017+t)/2*(e-1e4):e<14e3?a=364102e3+(84019+t)/2*(e-12e3):e<16e3&&(a=560126e3+(112021+t)/2*(e-14e3)),a},D={xp:"potion",aff:"gift",booster:"booster"},P=["xp","aff"],O=["xp","aff","booster"];let H;const j=()=>{T.lsSet(f.MARKET_INFO,H)},U=e=>"string"==typeof e?parseInt(e,10):e;class z{static collect(){T.isCurrentPage("shop")&&T.defer(()=>{H=T.lsGet(f.MARKET_INFO)||{};P.forEach(e=>{new MutationObserver(()=>(async e=>{z.collectBuyableItemsOfType(e),j()})(e)).observe($(`#shops_left .${D[e]}`)[0],{childList:!0})}),O.forEach(e=>{new MutationObserver(()=>(async e=>{z.collectSellableItemsOfType(e),j(),$(document).trigger("market:inventory-updated")})(e)).observe($(`#inventory .${D[e]} .inventory_slots > div`)[0],{childList:!0,subtree:!0})}),new MutationObserver(async()=>{z.collectEquipsList(),j(),$(document).trigger("market:equips-updated")}).observe($("#inventory .armor .inventory_slots > div")[0],{childList:!0}),z.collectRefreshTime(),z.collectBuyableItems(),z.collectSellableItems(),z.collectEquipsList(),j()})}static collectRefreshTime(){H.refreshTime=server_now_ts+parseInt($(".shop_count [rel=count]").attr("time"),10),H.refreshLevel=Hero.infos.level}static collectBuyableItems(){H.buyableItems||(H.buyableItems={}),P.forEach(z.collectBuyableItemsOfType)}static collectBuyableItemsOfType(e){const n={sc:{count:0,cost:0,value:0},hc:{count:0,cost:0,value:0}};$(`#shops_left .${D[e]} .slot:not(.empty)`).each((e,t)=>{var{currency:a,count:s,value:i,price:t}=$(t).data("d");const r=n[a];r.count+=s,r.cost+=U(t)*s,r.value+=U(i)*s}),H.buyableItems[e]=n}static collectSellableItems(){H.sellableItems||(H.sellableItems={booster:{count:0,cost:0},xp:{count:0,cost:0,value:0},aff:{count:0,cost:0,value:0}}),O.forEach(e=>z.collectSellableItemsOfType(e))}static collectSellableItemsOfType(i){const r={count:0,cost:0,value:0};$(`#inventory .${D[i]} .slot:not(.empty)`).each((e,t)=>{var{count:a,value:s,price_sell:t}=$(t).data("d"),a=U(a);r.count+=a,r.cost+=U(t)*a,["xp","aff"].includes(i)&&(r.value+=U(s)*a)}),H.sellableItems[i]=r}static collectEquipsList(){const a={count:0,cost:0};$("#inventory .armor .slot:not(.empty)").each((e,t)=>{var t=$(t).data("d")["price_sell"];a.count+=1,a.cost+=U(t)}),H.equipsAggregate=a}}const B=z,F={leaguePlayers:f.LEAGUE_PLAYERS,oldLeaguePlayers:f.LEAGUE_PLAYERS_OLD,pointHistory:f.LEAGUE_POINT_HISTORY,oldPointHistory:f.LEAGUE_POINT_HISTORY_OLD,leagueResults:f.LEAGUE_RESULTS,oldLeagueResults:f.LEAGUE_RESULTS_OLD,leagueScore:f.LEAGUE_SCORE,oldLeagueScore:f.LEAGUE_SCORE_OLD,leagueTime:f.LEAGUE_TIME,oldLeagueTime:f.LEAGUE_TIME_OLD,leagueUnknown:f.LEAGUE_UNKNOWN,oldLeagueUnknown:f.LEAGUE_UNKNOWN_OLD};class q{static collect(){T.isCurrentPage("battle")&&!T.isCurrentPage("pre-battle")&&q.collectLeagueBattlePoints(),T.isCurrentPage("tower-of-fame")&&T.defer(()=>{q.migrate(),q.clean(),q.setupListeners()})}static clean(){var e=server_now_ts+season_end_at,t=T.lsGet(f.LEAGUE_TIME);t?t<e&&(T.lsSetRaw(f.LEAGUE_PLAYERS_OLD,T.lsGetRaw(f.LEAGUE_PLAYERS)),T.lsSetRaw(f.LEAGUE_POINT_HISTORY_OLD,T.lsGetRaw(f.LEAGUE_POINT_HISTORY)),T.lsSetRaw(f.LEAGUE_RESULTS_OLD,T.lsGetRaw(f.LEAGUE_RESULTS)),T.lsSetRaw(f.LEAGUE_SCORE_OLD,T.lsGetRaw(f.LEAGUE_SCORE)),T.lsSetRaw(f.LEAGUE_UNKNOWN_OLD,T.lsGetRaw(f.LEAGUE_UNKNOWN)),T.lsSet(f.LEAGUE_TIME_OLD,t),T.lsRm(f.LEAGUE_PLAYERS),T.lsRm(f.LEAGUE_POINT_HISTORY),T.lsRm(f.LEAGUE_RESULTS),T.lsRm(f.LEAGUE_SCORE),T.lsRm(f.LEAGUE_UNKNOWN),T.lsSet(f.LEAGUE_TIME,e)):T.lsSet(f.LEAGUE_TIME,e)}static migrate(){Object.entries(F).forEach(([e,t])=>{e=T.lsGetRaw(e);e&&!T.lsGetRaw(t)&&T.lsSetRaw(t,e)})}static collectLeagueBattlePoints(){T.onAjaxResponse(/action=do_league_battles/i,(t,a)=>{const e=new URLSearchParams(a.data);a=e.get("id_opponent");if(!(1<e.get("number_of_battles"))){t=t.rewards.heroChangesUpdate.league_points;const s=T.lsGet(f.LEAGUE_POINT_HISTORY)||{};try{s[a].points.push(t)}catch(e){s[a]={points:[t]}}T.lsSet(f.LEAGUE_POINT_HISTORY,s)}})}static setupListeners(){new MutationObserver(()=>{$(document).trigger("league:player-selected")}).observe(document.getElementById("leagues_right"),{childList:!0})}}const Z=q,V={pop:0,popDuration:0,champ:0,clubChamp:0,gp:0};class W{static collect(){T.defer(()=>{T.isCurrentPage("activities")&&W.collectPoPTime()})}static collectPoPTime(){const e=T.lsGet(f.TRACKED_TIMES)||V;var{server_now_ts:t,pop_data:a}=window;a&&(a=Object.values(a).map(({remaining_time:e,time_to_finish:t})=>({endAt:parseInt(e),duration:parseInt(t)})).filter(({endAt:e})=>e).sort((e,t)=>e.endAt>t.endAt?1:-1)[0]||{endAt:0,duration:0},e.pop=t+a.endAt,e.popDuration=a.duration,a=e,T.lsSet(f.TRACKED_TIMES,a))}}const K=W,Y={normal:[],mythic:[]};class X{static collect(){T.defer(()=>{T.isCurrentPage("shop")&&X.collectFromMarket(),X.collectFromAjaxResponses(),X.collectFromHeroUpdate()})}static collectFromAjaxResponses(){T.onAjaxResponse(/(action|class)/,(e,t)=>{const o=T.lsGet(f.BOOSTER_STATUS)||Y,a=new URLSearchParams(t.data);const{action:l,class:c,type:s,id_m_i:i,id_item:r,number_of_battles:d,battles_amount:p}=["action","class","type","id_m_i","id_item","number_of_battles","battles_amount"].map(e=>({[e]:a.get(e)})).reduce((e,t)=>Object.assign(e,t),{});var t=e["success"];if(t)if("use"!==l||"Item"!==c||"booster"!==s){let t,a,s,i,r,n;if(o.mythic.forEach(e=>{switch(e.identifier){case"MB1":t=e;break;case"MB2":a=e;break;case"MB3":s=e;break;case"MB4":i=e;break;case"MB5":r=e;break;case"MB7":n=e}}),t&&"do_troll_battles"===l){const u=1<parseInt(d),g=e["rewards"];if(g&&g.data&&g.data.shards){let a=0;g.data.shards.forEach(({previous_value:e,value:t})=>{u?(e=t-e,a+=Math.floor(e/2)):a++}),t.usages_remaining-=a}}!a||"do_league_battles"!==l&&"do_season_battles"!==l||(a.usages_remaining-=parseInt(d)),!s||"do_pantheon_battles"!==l&&"do_troll_battles"!==l||(s.usages_remaining-=parseInt(d)),i&&"TeamBattle"===c&&(i.usages_remaining-=parseInt(p)),r&&"do_season_battles"===l&&(r.usages_remaining-=parseInt(d)),n&&"start"===l&&"TempPlaceOfPower"===c&&n.usages_remaining--,o.mythic=o.mythic.filter(({usages_remaining:e})=>0<e),T.lsSet(f.BOOSTER_STATUS,o),$(document).trigger("boosters:updated-mythic")}else{t=parseInt(r),t=632<=t&&t<=638;let s;if($(`.booster .slot[id_item=${r}]`).each((e,t)=>{const a=$(t).data("d");!s&&a.id_m_i.includes(i)&&(s=a)}),s){const n={...s};1<n.id_m_i.length&&(n.id_m_i=[i]),t?o.mythic.push({...n,usages_remaining:`${n.usages}`}):o.normal.push({...n,endAt:e.lifetime}),T.lsSet(f.BOOSTER_STATUS,o),$(document).trigger("boosters:equipped",{id_item:r,id_m_i:i,isMythic:t})}}})}static collectFromHeroUpdate(){const o=window.Hero.update.bind(window.Hero);window.Hero.update=(e,t,a)=>{if("xp"===e){const r=T.lsGet(f.BOOSTER_STATUS)||Y,n=r.mythic.find(({identifier:e})=>"MB6"===e);if(n){var{cur:s,level:i}=window.Hero.infos.Xp;let e=.05;i<=300&&(e=.2);i=(i=T.lsGet(f.CLUB_STATUS))?i.upgrades.experience_gain.bonus:window.Chat_vars.CLUB_ID?.1:0,i=Math.ceil(Math.floor((t-s)/(1+i+e))*e);n.usages_remaining-=i,r.mythic=r.mythic.filter(({usages_remaining:e})=>0<e),T.lsSet(f.BOOSTER_STATUS,r),$(document).trigger("boosters:updated-mythic")}}return o(e,t,a)}}static collectFromMarket(){const e=$("#equiped .booster .slot:not(.empty):not(.mythic)").map((e,t)=>$(t).data("d")).toArray();var t=$("#equiped .booster .slot:not(.empty).mythic").map((e,t)=>$(t).data("d")).toArray();const a=window["server_now_ts"];t={normal:e.map(e=>({...e,endAt:a+e.expiration})),mythic:t};T.lsSet(f.BOOSTER_STATUS,t)}}const Q=X;const J=class{static collect(){T.defer(()=>{if(T.isCurrentPage("clubs")&&window.membersList){const{upgradesInformation:{upgrades:t},membersList:a}=window;var e={upgrades:t,memberIds:a.map(({id_member:e})=>e)};T.lsSet(f.CLUB_STATUS,e)}})}};class ee{static collect(){ee.init(),T.isCurrentPage("side-quests")?T.defer(ee.collectFromSidequests):T.isCurrentPage("home")?T.defer(ee.collectFromHome):T.isCurrentPage("quest")&&T.defer(()=>{var e=T.lsGet(f.SIDEQUEST_STATUS);e&&e.continueLink&&T.isCurrentPage(e.continueLink)&&ee.collectFromActiveSidequest(e)})}static init(){T.lsGet(f.SIDEQUEST_STATUS)||T.lsSet(f.SIDEQUEST_STATUS,{energySpendAvailable:!0})}static collectFromSidequests(){let i=!1,r;$("#side_quests .side-quest").each((e,t)=>{const a=$(t);if(a.has(".Continue").length){const s=a.find(".side-quest-rewards").data("reward-display")["rewards"];s.find(({type:e})=>"xp"===e)&&(i=!0,r=a.find("a.Continue").attr("href"))}}),T.lsSet(f.SIDEQUEST_STATUS,{energySpendAvailable:i,continueLink:r})}static collectFromActiveSidequest(t){var e=()=>{const e=$("#controls");(e.find("#end_play").length||e.find("#archive-back").length||e.find("#archive-next").length)&&(t.continueLink=null,T.lsSet(f.SIDEQUEST_STATUS,t))};e(),new MutationObserver(e).observe(document.getElementById("controls"),{childList:!0})}static collectFromHome(){if($("[rel=map] .button-notification-new").length){const e=T.lsGet(f.SIDEQUEST_STATUS);e&&!e.energySpendAvailable&&(e.energySpendAvailable=!0,T.lsSet(f.SIDEQUEST_STATUS,e))}}}const te=ee;let ae;const se=[];class ie{static get(){var e;return ae||(e=document.createElement("style"),document.head.appendChild(e),{sheet:ae}=e),ae}static registerVar(e,t){se.includes(e)||(ie.get().insertRule(`:root {--${e}: ${t};}`),se.push(e))}}const re=ie;var ne=_i(379),oe=_i.n(ne),le=_i(795),ce=_i.n(le),de=_i(569),pe=_i.n(de),ue=_i(565),ge=_i.n(ue),n=_i(216),ne=_i.n(n),le=_i(589),de=_i.n(le),he=_i(971),me={};he.Z&&he.Z.locals&&(me.locals=he.Z.locals);var fe,be=0,ye={};ye.styleTagTransform=de(),ye.setAttributes=ge(),ye.insert=pe().bind(null,"head"),ye.domAPI=ce(),ye.insertStyleElement=ne(),me.use=function(e){return ye.options=e||{},be++||(fe=oe()(he.Z,ye)),me},me.unuse=function(){0<be&&!--be&&(fe(),fe=null)};const ve=me,_e=T["$"];const xe=class{constructor(){this.groups=[],this.modules=[],this.config={},this.hasRendered=!1,this.$configButton=null,this.$configPane=null,this.configPaneOpen=!1,this.colors=r[T.getGameKey()],T.isCurrentPage("home")&&(ve.use(),T.defer(()=>{this.init(),this.renderInteractables()}))}init(){this.gameIcon=_e(".hh_logo>img").attr("src"),this.gameTitle=_e(".hh_logo").attr("title")}loadConfig(){var e=T.lsGet(f.CONFIG);e&&Object.assign(this.config,e)}saveConfig(){T.lsSet(f.CONFIG,this.config)}updateConfig(e,t){this.config[e]=t,this.saveConfig();const{module:a,subKey:s}=this.getModuleForKey(e);if(a)if(s)"function"==typeof a.updateSubSetting&&a.updateSubSetting(s,t);else{const i=this.$configPane.find(`.config-setting[rel=${e}]`),r=i.find(".sub-settings input");t?(this.runModule(a),i.addClass("enabled"),r.prop("disabled",!1)):("function"==typeof a.tearDown&&a.tearDown(),i.removeClass("enabled"),r.prop("disabled",!0))}}registerGroup(e){var{name:t,key:a}=e;if(!t||!a)throw new Error('cannot register invalid group, need both "key" and "name"',e);this.groups.push(e)}registerModule(e){const{group:t,configSchema:a}=e;if(!t||!this.groups.find(({key:e})=>e===t))throw new Error(`cannot register module with unknown group ${t}`);this.modules.push(e),this.config[this.getConfigKey(t,a.baseKey)]=a.default,a.subSettings&&a.subSettings.forEach(e=>{this.config[this.getConfigKey(t,a.baseKey,e.key)]=e.default})}runModules(){this.modules.forEach(e=>{this.config[this.getConfigKey(e.group,e.configSchema.baseKey)]&&this.runModule(e)})}runModule(t){var e=Object.keys(this.config).filter(e=>e.startsWith(`${this.getConfigKey(t.group,t.configSchema.baseKey)}_`)).map(e=>({[e.replace(`${this.getConfigKey(t.group,t.configSchema.baseKey)}_`,"")]:this.config[e]})).reduce((e,t)=>Object.assign(e,t),{});t.run(e)}getConfigKey(e,t,a){return[e,t,a].filter(e=>e).join("_")}getModuleForKey(e){const[a,s,t]=e.split("_");return{module:this.modules.find(({group:e,configSchema:t})=>t.baseKey===s&&e===a),subKey:t}}renderInteractables(){this.hasRendered||(this.injectCSSVars(),this.renderConfigButton(),this.hasRendered=!0)}renderConfigButton(){this.$configButton=_e(`<div class="hh-plus-plus-config-button" hh_title="${this.gameTitle} ++"></div>`),this.$configButton.click(this.openConfigPane.bind(this)),_e("#contains_all").append(this.$configButton)}buildConfigPaneContent(){return _e(`
            <div class="tabs">
                ${this.groups.map(({key:e,name:t})=>`<h4 class="${e}" rel="${e}">${t}</h4>`).join("")}
            </div>
            ${this.groups.map(({key:i})=>`
            <div class="group-panel" rel="${i}">
                <div class="panel-contents">
                    ${this.modules.filter(({group:e})=>e===i).map(({configSchema:a})=>{var e=this.getConfigKey(i,a.baseKey);const s=this.config[e];return`
                <div class="config-setting ${s?"enabled":""} ${a.subSettings?"has-subsettings":""}" rel="${e}">
                    <label class="base-setting">
                        <span>${a.label}</span>
                        <input type="checkbox" name="${e}" ${s?'checked="checked"':""} />
                    </label>
                    ${a.subSettings?`
                    <div class="sub-settings">
                        ${a.subSettings.map(e=>{var t=this.getConfigKey(i,a.baseKey,e.key);return`
                        <label>
                            <input type="checkbox" name="${t}" ${this.config[t]?'checked="checked"':""} ${s?"":'disabled="disabled"'} />
                            <span>${e.label}</span>
                        </label>`}).join("")}
                    </div>`:""}
                </div>`}).join("")}
                </div>
            </div>`).join("")}`)}renderConfigPane(){const e=_e('<span class="close-config-panel" />');e.click(this.closeConfigPane.bind(this)),this.$configPane=_e('<div class="hh-plus-plus-config-panel"></div>').append(this.buildConfigPaneContent()).prepend(e),_e("#contains_all").append(this.$configPane),this.$configPane.find(".group-panel").niceScroll(".panel-contents",{bouncescroll:!1}),this.setupEvents(),this.selectConfigTab(this.groups[0].key)}closeConfigPane(){this.$configPane.hasClass("shown")&&(this.$configPane.removeClass("shown"),this.configPaneOpen=!1)}openConfigPane(){this.$configPane&&this.$configPane.hasClass("shown")||(this.$configPane||this.renderConfigPane(),this.$configPane.addClass("shown"),this.configPaneOpen=!0)}selectConfigTab(e){_e(".hh-plus-plus-config-panel .tabs h4").removeClass("selected"),_e(`.hh-plus-plus-config-panel .tabs h4[rel=${e}]`).addClass("selected"),_e(".hh-plus-plus-config-panel .group-panel").removeClass("shown"),_e(`.hh-plus-plus-config-panel .group-panel[rel=${e}]`).addClass("shown").getNiceScroll().resize()}setupEvents(){this.groups.forEach(({key:e})=>{_e(`.hh-plus-plus-config-panel .tabs h4[rel=${e}]`).click(this.selectConfigTab.bind(this,e))}),Object.keys(this.config).forEach(t=>{_e(`.hh-plus-plus-config-panel input[name=${t}]`).change(e=>{this.updateConfig(t,_e(e.target).prop("checked"))})})}injectCSSVars(){re.registerVar("config-button-icon",`url(${this.gameIcon})`),re.registerVar("config-panel-background",this.colors.panelBackground),re.registerVar("config-border-image-source",this.colors.panelBorderGradient),re.registerVar("config-panel-box-shadow",this.colors.panelInset),re.registerVar("cross-icon",`url('${T.getCDNHost()}/clubs/ic_xCross.png')`),re.registerVar("config-setting-background",this.colors.homeDark),re.registerVar("config-setting-border",this.colors.homeBorder)}};ue=class{constructor({group:e,configSchema:t}){this.group=e,this.configSchema=t,this.hasRun=!1}};n=class extends ue{constructor(e){super({group:"core",configSchema:e})}},le={HH:{girl:"girl",Girl:"Girl",haremettes:"haremettes",flower:"flower"},GH:{girl:"guy",Girl:"Guy",haremettes:"harem guys",flower:"lollipop"},CxH:{girl:"girl",Girl:"Girl",haremettes:"haremettes",flower:"jewel"}}[T.getGameKey()];const we={all:"All"},Se={refresh:"Home screen refresh",villain:"Fight a villain menu",villain_tiers:`Show tiers with ${le.girl}s`,xpMoney:"Better XP / Money",market:"Market information",marketGirlsFilter:`${le.Girl}s filter at the market`,marketEquipsFilter:"Equips filter at the market",marketXPAff:"XP and affection at the market",marketHideSellButton:'Toggleable "Sell" button',harem:"Harem information",league:"League information",league_board:"Show the league tops",league_promo:"Show promotion information",simFight:"League / Season / Villains sim",logSimFight:"Detailed logging in the browser console",teamsFilter:"Teams filter",champions:"Champions information",homeScreen:"Home Screen Shortcuts/Timers",resourceBars:"Resource bars / Booster tracking",seasonStats:"Season stats",pachinkoNames:"Show names in Pachinko",contestSummary:"Saved Contests rewards summary",battleEndstate:"Show final values when skipping battle",gemStock:"Gem stock in Market/Harem"},$e={missionsBackground:"Change missions background",collectMoneyAnimation:"Delete the collect money animation"},ke={darklord:"Dark Lord",ninjaspy:"Ninja Spy",gruntt:"Gruntt",edwarda:"Edwarda",donatien:"Donatien",silvanus:"Silvanus",bremen:"Bremen",finalmecia:"Finalmecia",rokosensei:"Roko Senseï",karole:"Karole",jacksoncrew:"Jackson&#8217;s Crew",pandorawitch:"Pandora Witch",nike:"Nike",sake:"Sake",werebunnypolice:"WereBunny Police",edward:"Edward",edernas:"Edernas",maro:"Maro",bodyhack:"BodyHack",greygolem:"Grey Golem",nymph:"The Nymph",fallback:"World {{world}} villain"},Te={xp:"Next: {{xp}} XP"},Ee={pointsUnbought:"Stat points buyable to max",moneyUnspent:"Money required to max",moneySpent:"Money spent in market",pointsLevel:"Level-based stat points",pointsBought:"Market-bought stat points",pointsEquip:"Equipments stat points",pointsBooster:"Boosters stat points",pointsClub:"Club bonus stat points",boosterItem:"boosters",xpItem:"books",xpCurrency:"XP",affItem:"gifts",affCurrency:"affection",equips:"equips",youOwn:"You own <b>{{count}}</b> {{type}}.",youCanSell:'You can sell everything for <b>{{cost}}</b> <span class="hudSC_mix_icn"></span>.',youCanGive:"You can give a total of <b>{{value}}</b> {{currency}}."},Ce={searchedName:"Search",girlName:"Girl name",searchedClass:"Class",searchedElement:"Element",searchedRarity:"Rarity",levelRange:"Level range",searchedAffCategory:"Affection category",searchedAffLevel:"Affection level",grade0:"0 stars",grade1:"1 star",grade2:"2 stars",grade3:"3 stars",grade4:"4 stars",grade5:"5 stars",grade6:"6 stars",team:"Team",visitTeams:'Visit <a href="../teams.html">Teams</a> first.'},Le={xp:"↑ {{remainNext}} · ⤒ {{remainMax}}",aff:"Next: {{remainNext}}"},Ie={hide:'Hide "Sell" button'},Me={marketRestocked:'> The <a href="../shop.html">Market</a> restocked since your last visit.',visitMarket:'> Visit the <a href="../shop.html">Market</a> first to see an inventory summary here',itemSummary:"{{count}} ({{value}} {{type}})",costSC:'{{cost}} <span cur="soft_currency"></span>',costHC:'{{cost}} <span cur="hard_currency"></span>',haremStats:"Harem Stats",upgrades:"Upgrades",levelsAwakening:"Levels & Awakening",market:"Inventory & Market",wikiPage:"{{name}}'s wiki page",haremLevel:"Harem level",unlockedScenes:"Unlocked scenes",income:"Income",or:"{{left}} or {{right}}",toUpgrade:"To upgrade all:",toLevelCap:"To level to cap:",toLevelMax:"To level to max ({{max}}):",affectionScenes:"Affection Scenes",buyable:"Available in the market:",sellable:"In inventory:",gifts:"Gifts",books:"Books",canBeSold:"Can be sold for {{sc}}",canBeBought:"{{item}} for {{amount}}",marketRestock:"Market restocks at {{time}} or at level {{level}}"},Ae={stayInTop:"To <em><u>stay in the top {{top}}</u></em>, you must have a minimum of <em>{{points}}</em> points",notInTop:"To <em><u>be in the top {{top}}</u></em>, you must have a minimum of <em>{{points}}</em> points",challengesRegen:"Natural regeneration: <em>{{challenges}}</em>",challengesLeft:"Challenges left: <em>{{challenges}}</em>",averageScore:"Average score per fight: <em>{{average}}</em>",scoreExpected:"Score expected: <em>{{score}}</em>",toDemote:"To <em><u>demote</u></em>, you must be passed by <em>{{players}}</em> players",willDemote:"To <em><u>demote</u></em>, you can have a maximum of <em>{{points}}</em> points",willDemoteZero:"To <em><u>demote</u></em>, you must remain at <em>0</em> points",toNotDemote:"To <em><u>not demote</u></em>, you must have more than <em>0</em> points",toStay:"To <em><u>not promote</u></em>, you must be passed by <em>{{players}}</em> players",willStay:"To <em><u>not promote</u></em>, you can have a maximum of <em>{{points}}</em> points",hideFoughtOpponents:"Hide fought opponents",showFoughtOpponents:"Show fought opponents",currentLeague:"Current league",victories:"Victories",defeats:"Defeats",unknown:"Unknown",notPlayed:"Not played",levelRange:"Level range",leagueFinished:"League finished on {{date}}",opponents:"Opponents",leaguePoints:"Points",avg:"Average"},Re={popsIn:"PoPs in {{time}}",popsReady:"PoPs ready",readyAt:"Ready at {{time}}",endAt:"Ends at {{time}}",fullAt:"Full at {{time}}"},Ne={fights:"Fights",victories:"Victories",defeats:"Defeats",mojoWon:"Won mojo",mojoLost:"Lost mojo",mojoWonAvg:"Won mojo average",mojoLostAvg:"Lost mojo average",mojoAvg:"Total mojo average"},Ge={availableGirls:`Available ${le.girl}s: `},De={totalRewards:"Total Saved Rewards ({{contests}} Contests):",contestsWarning:"Contests expire after 21 days!"},Pe={refresh:"Rafraîchir page d'accueil",villain:"Menu des combats des trolls",villain_tiers:"Montrer les paliers/filles",xpMoney:"XP / Argent + précis",market:"Infos marché",marketGirlsFilter:"Filtre des filles au marché",marketXPAff:"XP et affection au marché",harem:"Infos harem",league:"Infos ligue",league_board:"Montrer les tops ligue",league_promo:"Montrer les informations sur la promotion",simFight:"Simu ligue / saison / combats de troll",logSimFight:"Détails dans la console du navigateur",teamsFilter:"Filtre d'équipes",champions:"Infos champions",links:"Raccourcis/Timers",seasonStats:"Stats de la saison",pachinkoNames:"Montrer les noms au Pachinko",contestSummary:"Récap' des récompenses des Compètes enregistrées",battleEndstate:"Afficher le détail quand tu passe le combat"},Oe={missionsBackground:"Change l'arrière-plan des missions",collectMoneyAnimation:"Désactive l'animation de récolte d'argent"},He={ninjaspy:"Espion Ninja",jacksoncrew:"Éq. de Jackson",pandorawitch:"Sorcière Pandora",werebunnypolice:"Police des Lapines-Garous",fallback:"Monde {{world}} troll"},je={pointsUnbought:"Nombre de points requis pour max",moneyUnspent:"Argent demandé pour max",moneySpent:"Argent dépensé dans le marché",pointsLevel:"Points donnés par ton niveau",pointsBought:"Points achetés au marché",pointsEquip:"Points donnés par ton équipement",pointsBooster:"Points donnés par tes boosters",pointsClub:"Points donnés par ton club",boosterItem:"boosters",xpItem:"livres",xpCurrency:"XP",affItem:"cadeaux",affCurrency:"affection",equips:"équipements",youOwn:"Tu possèdes <b>{{count}}</b> {{type}}.",youCanSell:'Tu peux tout vendre pour <b>{{cost}}</b> <span class="hudSC_mix_icn"></span>.',youCanGive:"Tu peux donner un total de <b>{{value}}</b> {{currency}}."},Ue={all:"Toutes",searchedName:"Nom recherché",girlName:"Nom de la fille",searchedClass:"Classe recherchée",searchedElement:"Élément recherché",searchedRarity:"Rareté recherchée",levelRange:"Intervalle de niveaux",searchedAffCategory:"Catégorie d'affection recherchée",searchedAffLevel:"Niveau d'affection recherché",grade0:"0 étoile",grade1:"1 étoile",grade2:"2 étoiles",grade3:"3 étoiles",grade4:"4 étoiles",grade5:"5 étoiles",grade6:"6 étoiles",team:"Équipe",visitTeams:"Visiter d'abord <a href=\"../teams.html\">l'équipe</a>."},ze={fights:"Combats",victories:"Victoires",defeats:"Defaites",mojoWon:"Mojo gagnés",mojoLost:"Mojo perdus",mojoWonAvg:"Moyenne mojo gagnés",mojoLostAvg:"Moyenne mojo perdus",mojoAvg:"Moyenne mojo globale"},Be={availableGirls:"Filles disponibles: "},Fe={totalRewards:"Total des récompenses enregistrées ({{contests}} Compètes) :",contestsWarning:"Les Compètes expirent après 21 jours !"},qe={refresh:"Actualizacion Menu principal",villain:"Menu Pelear contra villano",villain_tiers:"Mostrar Rangos con Chicas",xpMoney:"Mejor XP / Dinero",market:"Informacion de Mercado",marketGirlsFilter:"Filtro de chicas en el mercado",marketXPAff:"El XP y el afecto en el mercado",harem:"Informacion de Harén",league:"Informacion de Liga",league_board:"Mostrar los mejores de la liga",league_promo:"Mostrar información de promoción",simFight:"Simulacion de Liga / Temporada / Villano",logSimFight:"Registro detallado en la consola del navegador",teamsFilter:"Filtro de equipos",champions:"Informacion de Campeones",links:"Atajos/Temporizadores",seasonStats:"Season stats",pachinkoNames:"Mostra i nomi nel Pachinko",contestSummary:"Riepilogo dei premi salvati dei contest",battleEndstate:"Mostra i valori finali dopo aver saltato la battaglia"},Ze={missionsBackground:"Cambiare lo sfondo delle missioni",collectMoneyAnimation:"Disattivare l'animazione di raccolta dei soldi"},Ve={darklord:"Señor Oscuro",ninjaspy:"Ninja espía",jacksoncrew:"La tripulación de Jackson",pandorawitch:"Pandora Bruja",werebunnypolice:"Policía hombres-conejos",fallback:"Mondo {{world}} nemico"},We={pointsUnbought:"Puntos de estatus necesarios para maximo",moneyUnspent:"Dinero necesario para maximo",moneySpent:"Dinero usado en el mercado",pointsLevel:"Puntos de estatus de nivel",pointsBought:"Puntos comprados del mercado",pointsEquip:"Puntos de estatus de equipamiento",pointsBooster:"Puntos de estatus de los potenciadores",pointsClub:"Puntos de estatus del club",boosterItem:"potenciadores",xpItem:"libros",xpCurrency:"XP",affItem:"regalos",affCurrency:"afecto",equips:"equipamiento",youOwn:"Tienes <b>{{count}}</b> {{type}}.",youCanSell:'Puedes vender todo por <b>{{cost}}</b> <span class="hudSC_mix_icn"></span>.',youCanGive:"Puedes dar un total de <b>{{value}}</b> {{currency}}."},Ke={all:"Todo",searchedName:"Nombre buscado",girlName:"Nombre de la chica",searchedClass:"Clase buscada",searchedElement:"Elemento buscado",searchedRarity:"Rareza buscada",levelRange:"Rango de nivel",searchedAffCategory:"Categoría de afecto buscada",searchedAffLevel:"Nivel de afecto buscado",grade0:"0 estrella",grade1:"1 estrella",grade2:"2 estrellas",grade3:"3 estrellas",grade4:"4 estrellas",grade5:"5 estrellas",grade6:"6 estrellas",team:"Equipo",visitTeams:'Visita el <a href="../teams.html">Equipos</a> primero.'},Ye={fights:"Peleas",victories:"Victorias",defeats:"Derrota",mojoWon:"Mojo ganado",mojoLost:"Mojo perdido",mojoWonAvg:"Mojo ganado promedio",mojoLostAvg:"Mojo perdido promedio",mojoAvg:"Promedio total de mojo"},Xe={availableGirls:"Chicas disponibles: "},Qe={totalRewards:"Ricompense totali salvate ({{contests}} contest):",contestsWarning:"I contest scadono dopo 21 giorni!"},Je={refresh:"Refresh pagina Home",villain:"Menù battaglia Troll",villain_tiers:"Mostra battaglie con ragazze",xpMoney:"Migliora XP / soldi",market:"Informazioni negozio",marketGirlsFilter:"Filtro per ragazze nel mercato",marketXPAff:"XP e affetto nel mercato",harem:"Informazioni Harem",league:"Informazioni sulle Leghe",league_board:"Mostra i top della lega",league_promo:"Mostra informazioni sulla promozione",simFight:"Simulazione Leghe / Stagione / Troll",logSimFight:"Accesso dettagliato nella console del browser",teamsFilter:"Filtro delle squadre",champions:"Informazioni sui Campioni",links:"Scorciatoie/Timer",seasonStats:"Season stats",pachinkoNames:"Mostrar nombres en Pachinko",contestSummary:"Resumen de recompensas guardadas de las competiciones",battleEndstate:"Muestra los valores finales después de omitir la batalla"},et={missionsBackground:"Cambiar el fondo de las misiones",collectMoneyAnimation:"Desactivar la animación de recogida de dinero"},tt={darklord:"Signore Oscuro",ninjaspy:"Spia Ninja",jacksoncrew:"Ciurma di Jackson",pandorawitch:"Strega Pandora",werebunnypolice:"Polizia del Conigli Mannari",fallback:"Mundo {{world}} villano"},at={pointsUnbought:"Punti statistica necessari per il massimo",moneyUnspent:"Soldi necessari per il massimo",moneySpent:"Soldi spesi al negozio",pointsLevel:"Punti acquisiti da aumento livello",pointsBought:"Punti comprati al negozio",pointsEquip:"Punti statistica da equipaggiamento",pointsBooster:"Punti statistica dei potenziamenti",pointsClub:"Punti statistica bonus del Club",boosterItem:"potenziamenti",xpItem:"libri",xpCurrency:"XP",affItem:"regali",affCurrency:"affetto",equips:"equipaggiamento",youOwn:"Possiedi <b>{{count}}</b> {{type}}.",youCanSell:'Puoi vendere tutto per <b>{{cost}}</b> <span class="hudSC_mix_icn"></span>.',youCanGive:"Puoi dare un massimo di <b>{{value}}</b> {{currency}}."},st={all:"Tutti",searchedName:"Nome ricercato",girlName:"Nome della ragazza",searchedClass:"Classe ricercata",searchedElement:"Elemento ricercato",searchedRarity:"Rarità ricercata",levelRange:"Gamma di livelli",searchedAffCategory:"Categoria di affetto ricercata",searchedAffLevel:"Livello di affetto ricercato",grade0:"0 stella",grade1:"1 stella",grade2:"2 stelle",grade3:"3 stelle",grade4:"4 stelle",grade5:"5 stelle",grade6:"6 stelle",team:"Squadra",visitTeams:'Visita le <a href="../teams.html">Squadre</a> prima.'},it={fights:"Combattimenti",victories:"Vittorie",defeats:"Sconfitte",mojoWon:"Mojo vinto",mojoLost:"Mojo perso",mojoWonAvg:"Media mojo vinto",mojoLostAvg:"Media mojo perso",mojoAvg:"Media mojo globale"},rt={availableGirls:"Ragazze disponibili: "},nt={totalRewards:"Recompensas totales guardadas ({{contests}} Competiciones):",contestsWarning:"¡Los Competiciones caducan después de 21 días!"},ot={refresh:"Homepage aktualisieren",villain:"Widersacher-Menü",villain_tiers:"Stufen mit Girls anzeigen",xpMoney:"Migliora XP / soldi",market:"Marktplatz-Informationen",marketGirlsFilter:"Mädchenfilter auf dem Markt",marketXPAff:"XP und Zuneigung auf dem Markt",harem:"Harem-Informationen",league:"Liga-Informationen",league_board:"Die Liga-Spitzen anzeigen",league_promo:"Werbeinformationen anzeigen",simFight:"Liga/Saison/Widersacher-Simulation",logSimFight:"Detaillierte Protokollierung in der Browserkonsole",teamsFilter:"Mannschaften filtern",champions:"Champion-Informationen",links:"Abkürzungen/Zeitgeber",seasonStats:"Season stats",pachinkoNames:"Namen in Pachinko anzeigen",contestSummary:"Zusammenfassung der gespeicherten Wettbewerbsprämien",battleEndstate:"Endgültige Werte beim Überspringen des Kampfes anzeigen"},lt={missionsBackground:"Missionshintergrund ändern",collectMoneyAnimation:'Deaktivieren Sie die Animation "Geld sammeln"'},ct={darklord:"Dunkler Lord",ninjaspy:"Ninja Spion",jacksoncrew:"Jacksons Crew",pandorawitch:"Pandora Hexe",werebunnypolice:"Wer-Kaninchen Polizei"},dt={pointsUnbought:"Benötigte Statuspunkte bis Maximum",moneyUnspent:"Nötiges Geld bis Maximum",moneySpent:"Bisher ausgegeben",pointsLevel:"Statuspunkte durch Heldenlevel",pointsBought:"Gekaufte Statuspunkte",pointsEquip:"Statuspunkte durch Ausrüstung",pointsBooster:"Statuspunkte durch Booster",pointsClub:"Statuspunkte durch Club-Boni",boosterItem:"Booster",xpItem:"Bücher",xpCurrency:"XP",affItem:"Geschenke",affCurrency:"Zuneigung",equips:"Ausrüstungen",youOwn:"Du besitzt <b>{{count}}</b> {{type}}.",youCanSell:'Du kannst alles verkaufen für <b>{{cost}}</b> <span class="hudSC_mix_icn"></span>.',youCanGive:"Du kannst ingesamt <b>{{value}}</b> {{currency}} vergeben."},pt={all:"Alle",searchedName:"Name",girlName:"Name",searchedClass:"Klasse",searchedRarity:"Seltenheit",levelRange:"Level",searchedAffCategory:"Maximale Zuneigung",searchedAffLevel:"Aktuelle Zuneigung",grade0:"0 Sterne",grade1:"1 Stern",grade2:"2 Sterne",grade3:"3 Sterne",grade4:"4 Sterne",grade5:"5 Sterne",grade6:"6 Sterne",team:"Team",visitTeams:'Besuche zuerst die <a href="../teams.html">Teams</a>.'},ut={fights:"Kämpfe",victories:"Siege",defeats:"Niederlagen",mojoWon:"Gewonnenes Mojo",mojoLost:"Verlorenes Mojo",mojoWonAvg:"Durchschnittlich gewonnenes Mojo",mojoLostAvg:"Durchschnittlich verlorenes Mojo",mojoAvg:"Insgesamt durchschnittliches Mojo"},gt={availableGirls:"Freie Mädchen: "},ht={totalRewards:"Gesamtzahl der gespeicherten Belohnungen ({{contests}} Wettbewerbe):",contestsWarning:"Wettbewerbe verfallen nach 21 Tagen!"},mt={en:e,fr:t,es:a,it:s,de:i},ft=Object.keys(mt),bt=ft[0];let yt,vt,_t;class xt{static getLang(){var e;return yt||(e=document.documentElement.lang.substring(0,2),yt=ft.includes(e)?e:bt),yt}static getLocale(){return vt=vt||(["en","ja"].includes(xt.getLang())?"en":"fr"),vt}static getModuleLabel(e,t,a={}){var s=xt.getLang();let i=mt[s][e]&&mt[s][e][t]||mt[bt][e][t];return Object.entries(a).forEach(([e,t])=>{i=i.replace(`{{${e}}}`,t)}),i}static getLocaleDecimalSeperator(){return _t=_t||Number(1.1).toLocaleString(xt.getLocale()).replace(/[0-9]/g,""),_t}static parseLocaleFloat(e){return parseFloat(e.split(xt.getLocaleDecimalSeperator()).map(e=>e.replace(/[^0-9]/g,"")).join("."),10)}static parseLocaleRoundedInt(e){return e.includes(xt.getLocaleDecimalSeperator())?parseInt(e.replace("K","00").replace(/[^0-9]/gi,""),10):e.includes("K")?parseInt(e.replace("K","000").replace(/[^0-9]/gi,""),10):parseInt(e.replace(/[^0-9]/gi,""),10)}static nThousand(e){return(e="number"!=typeof e?0:e).toLocaleString(xt.getLocale()).replace(" "," ")}static nRounding(e,t,a){var s=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"}];let i;for(i=s.length-1;0<i&&!(e>=s[i].value);i--);return 1===a?+(Math.ceil(e/s[i].value*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)+s[i].symbol:0===a?+(Math.round(e/s[i].value*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)+s[i].symbol:-1===a?+(Math.floor(e/s[i].value*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)+s[i].symbol:void 0}}const wt=xt,St={HH:[{key:"darklord",world:2,girls:{1:["8","9","10"],2:["7270263"],3:["979916751"]},gems:["fire","sun"]},{key:"ninjaspy",world:3,girls:{1:["14","13","12"],2:["318292466"],3:["936580004"]},gems:["darkness","light"]},{key:"gruntt",world:4,girls:{1:["19","16","18"],2:["610468472"],3:["54950499"]},gems:["psychic","water"]},{key:"edwarda",world:5,girls:{1:["29","28","26"],2:["4749652"],3:["345655744"]},gems:["nature","stone"]},{key:"donatien",world:6,girls:{1:["39","40","41"],2:["267784162"],3:["763020698"]},gems:["darkness"]},{key:"silvanus",world:7,girls:{1:["64","63","31"],2:["406004250"],3:["864899873"]},gems:["light"]},{key:"bremen",world:8,girls:{1:["85","86","84"],2:["267120960"],3:["536361248"]},gems:["psychic"]},{key:"finalmecia",world:9,girls:{1:["114","115","116"],2:["379441499"],3:["447396000"]},gems:["water"]},{key:"rokosensei",world:10,girls:{1:["1247315","4649579","7968301"],2:["46227677"],3:["933487713"]},gems:["fire"]},{key:"karole",world:11,girls:{1:["1379661","4479579","1800186"],2:["985085118"],3:["339765042"]},gems:["nature"],items:["K4"]},{key:"jacksoncrew",world:12,girls:{1:["24316446","219651566","501847856"],2:["383709663"],3:["90685795"]},gems:["stone"],items:["XP4"]},{key:"pandorawitch",world:13,girls:{1:["225365882","478693885","231765083"],2:["155415482"],3:["769649470"]},gems:["sun"],items:["K4"]},{key:"nike",world:14,girls:{1:["86962133","243793871","284483399"],2:[],3:[]},gems:["darkness"]},{key:"sake",world:15,girls:{1:["612527302","167231135","560979916","784911160","549524850","184523411"],2:[],3:[]},gems:["light"]},{key:"werebunnypolice",world:16,girls:{1:["164866290","696124016","841591253"],2:[],3:[]},gems:["psychic"]},{world:17,girls:{1:[],2:[],3:[]},gems:["water"]}],GH:[{key:"darklord",world:2,girls:{1:["8","9","10"],2:["7270263"],3:["979916751"]},gems:["fire","sun"]},{key:"ninjaspy",world:3,girls:{1:["14","13","12"],2:["318292466"],3:["936580004"]},gems:["darkness","light"]},{key:"gruntt",world:4,girls:{1:["19","16","18"],2:["610468472"],3:["54950499"]},gems:["psychic","water"]},{key:"edward",world:5,girls:{1:["29","28","26"],2:["4749652"],3:["345655744"]},gems:["nature","stone"]},{key:"donatien",world:6,girls:{1:["39","40","41"],2:["267784162"],3:["763020698"]},gems:["darkness"]},{key:"silvanus",world:7,girls:{1:["64","63","31"],2:["406004250"],3:["864899873"]},gems:["light"]},{key:"bremen",world:8,girls:{1:["85","86","84"],2:["267120960"],3:["536361248"]},gems:["psychic"]},{key:"edernas",world:9,girls:{1:["114","115","116"],2:["379441499"],3:["447396000"]},gems:["water"]},{key:"rokosensei",world:10,girls:{1:["1247315","4649579","7968301"],2:["46227677"],3:["933487713"]},gems:["fire"]},{key:"maro",world:11,girls:{1:["1379661","4479579","1800186"],2:[],3:[]},gems:["nature"],items:["K4"]},{key:"jacksoncrew",world:12,girls:{1:["24316446","219651566","501847856"],2:[],3:[]},gems:["stone"],items:["XP4"]}],CxH:[{key:"bodyhack",world:2,girls:{1:["830009523","907801218","943323021"],2:[],3:[]},gems:["fire","sun"]},{key:"greygolem",world:3,girls:{1:["271746999","303805209","701946373"],2:[],3:[]},gems:["darkness","light"]},{key:"nymph",world:4,girls:{1:["943255266","977228200","743748788"],2:[],3:[]},gems:["psychic","water"]},{key:"athicus",world:5,girls:{1:["514994766","140401381","232860230"],2:[],3:[]},gems:["nature","stone"]},{world:6,girls:{1:[],2:[],3:[]},gems:["darkness"]}]};var $t=_i(217),kt={};$t.Z&&$t.Z.locals&&(kt.locals=$t.Z.locals);var Tt,Et=0,Ct={};Ct.styleTagTransform=de(),Ct.setAttributes=ge(),Ct.insert=pe().bind(null,"head"),Ct.domAPI=ce(),Ct.insertStyleElement=ne(),kt.use=function(e){return Ct.options=e||{},Et++||(Tt=oe()($t.Z,Ct)),kt},kt.unuse=function(){0<Et&&!--Et&&(Tt(),Tt=null)};const Lt=kt,It="villain";const Mt=class extends n{constructor(){super({baseKey:It,label:wt.getModuleLabel("config",It),default:!0,subSettings:[{key:"tiers",label:wt.getModuleLabel("config",`${It}_tiers`),default:!0}]}),this.label=wt.getModuleLabel.bind(this,It)}run({tiers:m}){this.hasRun||(Lt.use(),this.injectCSSVars(),T.defer(()=>{const e=St[T.getGameKey()],u=T.lsGet(f.EVENT_VILLAINS)||[],g=T.lsGet(f.MYTHIC_EVENT_VILLAINS)||[],h=T.getGirlDictionary(),t=Hero.infos.questing.id_world,a=`
                <div class="TrollsMenu" id="TrollsID">
                    ${e.filter(e=>e.world<=t).map(({key:e,girls:t,world:a,gems:s,items:i})=>{let r="";if(m){const p=e=>h.get(e)&&100===h.get(e).shards;const m=`${t[1].some(e=>!p(e))?"&#185;":""}${t[2].some(e=>!p(e))?"&#178;":""}${t[3].some(e=>!p(e))?"&#179;":""}`;r=` ${m}${m.length?" ":""}`}let n="";s&&(n=s.map(e=>`<img class='villain_gem' src="${T.getCDNHost()}/pictures/design/gems/${e}.png" />`).join(""));let o="";i&&(o=i.map(e=>`<img class='villain_item' src="${T.getCDNHost()}/pictures/items/${e}.png" />`).join(""));i=`<div class="villain_rewards">${n}${o}</div>`,i=`${e?this.label(e):this.label("fallback",{world:a})}${r}${i}`;let l="regular";const c=`${a-1}`;a=u.find(({troll:e})=>e===c);a&&({id:a,rarity:d}=a,!!(a=h.get(a))&&100===a.shards||(l=`eventTroll ${d}`));var d=g.find(({troll:e})=>e===c);return d&&(!!(d=h.get(d.id))&&100===d.shards||(l="mythicEventTroll")),`<a class="${l}" href="/troll-pre-battle.html?id_opponent=${c}">${i}</a>`}).join("")}
                </div>
            `;$("#contains_all > header").children("[type=fight]").append(a.replace(/ {4}/g,"").replace(/\n/g,""))}),$("section:has(#pachinko_whole)").css("pointer-events","none"),this.hasRun=!0)}injectCSSVars(){re.registerVar("troll-menu-font-weight",T.isCxH()?"800":"400")}};var At=_i(400),Rt={};At.Z&&At.Z.locals&&(Rt.locals=At.Z.locals);var Nt,Gt=0,Dt={};Dt.styleTagTransform=de(),Dt.setAttributes=ge(),Dt.insert=pe().bind(null,"head"),Dt.domAPI=ce(),Dt.insertStyleElement=ne(),Rt.use=function(e){return Dt.options=e||{},Gt++||(Nt=oe()(At.Z,Dt)),Rt},Rt.unuse=function(){0<Gt&&!--Gt&&(Nt(),Nt=null)};const Pt=Rt,Ot="xpMoney";const Ht=class extends n{constructor(){super({baseKey:Ot,label:wt.getModuleLabel("config",Ot),default:!0}),this.label=wt.getModuleLabel.bind(this,Ot)}run(){this.hasRun||(T.defer(()=>{Pt.use(),this.betterXP();const e=new MutationObserver(this.betterXP.bind(this));e.observe($("[hero=xp]")[0],{childList:!0}),this.betterMoney();const t=new MutationObserver(this.betterMoney.bind(this));t.observe($("[hero=soft_currency]")[0],{childList:!0})}),this.hasRun=!0)}betterXP(){const e=$("[rel=xp] .bar-wrapper .over");this.$xpContainer||(this.$xpContainer=$('<span class="scriptXPContainer"></span>'),e.append(this.$xpContainer));var t=Hero.infos.Xp.left;0<t?(e.addClass("hideDefault"),this.$xpContainer.text(this.label("xp",{xp:wt.nThousand(t)}))):(e.removeClass("hideDefault"),this.$xpContainer.text(""))}betterMoney(){this.$moneyContainer||(this.$moneyContainer=$('<span class="scriptMoneyContainer"></span>'),$("[hero=soft_currency]").after(this.$moneyContainer));var e=Hero.infos.soft_currency,t=wt.nThousand(e);1e6<=e?(e=wt.nRounding(e,3,0),this.$moneyContainer.text(e).attr("hh_title",t)):this.$moneyContainer.text($("[hero=soft_currency]").text()).attr("hh_title",t)}};var jt=_i(849),Ut={};jt.Z&&jt.Z.locals&&(Ut.locals=jt.Z.locals);var zt,Bt=0,Ft={};Ft.styleTagTransform=de(),Ft.setAttributes=ge(),Ft.insert=pe().bind(null,"head"),Ft.domAPI=ce(),Ft.insertStyleElement=ne(),Ut.use=function(e){return Ft.options=e||{},Bt++||(zt=oe()(jt.Z,Ft)),Ut},Ut.unuse=function(){0<Bt&&!--Bt&&(zt(),zt=null)};const qt=Ut,Zt="market",Vt=[1,2,3],Wt=e=>`carac${e}`;const Kt=class extends n{constructor(){super({baseKey:Zt,label:wt.getModuleLabel("config",Zt),default:!0}),this.label=wt.getModuleLabel.bind(this,Zt),this.$tooltips={},this.previousCaracs={1:0,2:0,3:0}}shouldRun(){return T.isCurrentPage("shop")}run(){!this.hasRun&&this.shouldRun()&&(qt.use(),T.defer(()=>{this.injectCSSVars(),this.setupHooks(),this.updateStats(),this.updateInventory(),this.updateEquips(),this.attachGirlQuota()}),this.hasRun=!0)}updateStats(){const g=[],h=[];Object.entries(this.previousCaracs).every(([e,t])=>t===Hero.infos.caracs[Wt(e)])||($("#equiped .armor .slot:not(.empty)").each((e,t)=>{g.push($(t).data("d"))}),$("#equiped .booster .slot:not(.empty):not(.mythic)").each((e,t)=>{h.push($(t).data("d"))}),Vt.forEach(e=>{const s=Wt(e);var t=Hero.infos.caracs[s],a=g.map(e=>e[s]).reduce((e,t)=>e+t,0),i=heroStatsPrices[e]["base_stat"],r=Hero.infos[s],n=30*Hero.infos.level,o=n-r,l=G(n),c=G(r),n=l-c;let d=0,p=0;h.forEach(e=>{var{identifier:t,rarity:a}=e;"B1"===t&&(e=e[s],"legendary"===a?p+=e/100:d+=e)});l=d+Math.ceil((i+r+a+d)*p);let u=0;(T.isHH()||T.isGH())&&(u=t-i-r-a-l),this.$tooltips[e]||(this.$tooltips[e]=$(`<div class="statToolTip" rel="${s}"></div>`),$(`.hero_stats [hero=${s}]`).append('<div class="marketInfoIcon statInfo" ></div>').append(this.$tooltips[e])),this.$tooltips[e].html(`
                <table>
                    <tbody>
                        <tr><td>${this.label("pointsUnbought")} :</td><td>${wt.nThousand(o)}</td></tr>
                        <tr><td>${this.label("moneyUnspent")} :</td><td>${wt.nThousand(n)}</td></tr>
                        <tr><td>${this.label("moneySpent")} :</td><td>${wt.nThousand(c)}</td></tr>
                    </tbody>
                </table>
                <hr/>
                <table>
                    <tbody>
                        <tr><td>${this.label("pointsLevel")} :</td><td>${wt.nThousand(i)}</td></tr>
                        <tr><td>${this.label("pointsBought")} :</td><td>${wt.nThousand(r)}</td></tr>
                        <tr><td>${this.label("pointsEquip")} :</td><td>${wt.nThousand(a)}</td></tr>
                        <tr><td>${this.label("pointsBooster")} :</td><td>${wt.nThousand(l)}</td></tr>
                        <tr><td>${this.label("pointsClub")} :</td><td>${wt.nThousand(u)}</td></tr>
                    </tbody>
                </table>
            `.replace(/( {4}|\n)/g,""))}))}updateInventory(){this.updateItems(),this.updateEquips()}updateItems(){const r=T.lsGet(f.MARKET_INFO);r.sellableItems&&O.forEach(e=>{if(!this.$tooltips[e]){this.$tooltips[e]=$('<div class="inventoryToolTip"></div>');const i=$('<div class="marketInfoIcon inventoryInfo"></div>');$(`#inventory .${D[e]}`).prepend(i),i.after(this.$tooltips[e])}var{count:t,cost:a,value:s}=r.sellableItems[e];this.$tooltips[e].html(`
                ${this.label("youOwn",{count:wt.nThousand(t),type:this.label(`${e}Item`)})}<br />
                ${["xp","aff"].includes(e)?this.label("youCanGive",{value:wt.nThousand(s),currency:this.label(`${e}Currency`)})+"<br />":""}
                ${this.label("youCanSell",{cost:wt.nThousand(a)})}
            `)})}updateEquips(){var e=T.lsGet(f.MARKET_INFO);if(e.equipsAggregate){var t="equip";if(!this.$tooltips[t]){this.$tooltips[t]=$('<div class="inventoryToolTip"></div>');const s=$('<div class="marketInfoIcon inventoryInfo"></div>');$("#inventory .armor").prepend(s),s.after(this.$tooltips[t])}var{count:a,cost:e}=e.equipsAggregate;this.$tooltips[t].html(`
            ${this.label("youOwn",{count:wt.nThousand(a),type:this.label("equips")})}<br />
            ${this.label("youCanSell",{cost:wt.nThousand(e)})}
        `)}}attachGirlQuota(){var e,t,a=T.getAwakeningThreshold();a&&({currentThreshold:e,currentThresholdOwned:t,currentThresholdMin:a}=a,a=`${GT.design.Lvl} ${e} : ${t} / ${a} ${GT.design.Girls}`,$("#girls_list .level_target").attr("hh_title",a))}setupHooks(){T.onAjaxResponse(/action=update_stats/,(e,t)=>{if(e.success){const a=new URLSearchParams(t.data);t=Wt(a.get("carac")),e=e[t];Hero.infos[t]=e}}),Vt.forEach(e=>{var t=Wt(e);const a=new MutationObserver(()=>this.updateStats());a.observe($(`[hero=${t}] [carac=${e}]`)[0],{childList:!0})}),$(document).on("market:inventory-updated",()=>this.updateItems()),$(document).on("market:equips-updated",()=>this.updateEquips())}injectCSSVars(){re.registerVar("info-icon",`url(${T.getCDNHost()}/design/ic_info.svg)`)}};const Yt=class{static selectInput({id:e,label:t,options:a,value:s}){return`
            <div class="form-control">
                <div class="select-group">
                    <label class="head-group" for="${e}">${t}</label>
                    <select name="${e}" id="${e}" icon="down-arrow">
                        <option value="all" ${"all"===s?'selected="selected"':""}>${wt.getModuleLabel("common","all")}</option>
                        ${a.map(({label:e,value:t})=>`<option value="${t}" ${s===t?'selected="selected"':""}>${e}</option>`).join("")}
                    </select>
                </div>
            </div>
        `}static textInput({id:e,label:t,placeholder:a,value:s}){return`
            <div class="form-control">
                <div class="input-group">
                    <label class="head-group" for="${e}">${t}</label>
                    <input type="text" autocomplete="off" id="${e}" placeholder="${a}" icon="search" value="${s}">
                </div>
            </div>
        `}},Xt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiNGRkZGRkYiPjxnPjxwYXRoIGQ9Ik0wLDBoMjQgTTI0LDI0SDAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNNyw2aDEwbC01LjAxLDYuM0w3LDZ6IE00LjI1LDUuNjFDNi4yNyw4LjIsMTAsMTMsMTAsMTN2NmMwLDAuNTUsMC40NSwxLDEsMWgyYzAuNTUsMCwxLTAuNDUsMS0xdi02IGMwLDAsMy43Mi00LjgsNS43NC03LjM5QzIwLjI1LDQuOTUsMTkuNzgsNCwxOC45NSw0SDUuMDRDNC4yMSw0LDMuNzQsNC45NSw0LjI1LDUuNjF6Ii8+PHBhdGggZD0iTTAsMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PC9nPjwvc3ZnPg==",Qt=["fire","nature","stone","sun","water","darkness","light","psychic"],Jt={fire:"Eccentric",nature:"Exhibitionist",stone:"Physical",sun:"Playful",water:"Sensual",darkness:"Dominatrix",light:"Submissive",psychic:"Voyeurs"};var ea=_i(546),ta={};ea.Z&&ea.Z.locals&&(ta.locals=ea.Z.locals);var aa,sa=0,ia={};ia.styleTagTransform=de(),ia.setAttributes=ge(),ia.insert=pe().bind(null,"head"),ia.domAPI=ce(),ia.insertStyleElement=ne(),ta.use=function(e){return ia.options=e||{},sa++||(aa=oe()(ea.Z,ia)),ta},ta.unuse=function(){0<sa&&!--sa&&(aa(),aa=null)};const ra=ta,na=T["$"],oa="marketGirlsFilter",la={carac:"all",rarity:"all",element:"all",affCategory:"all",affLvl:"all",name:"",range:"",team:null};const ca=class extends n{constructor(){super({baseKey:oa,label:wt.getModuleLabel("config",oa),default:!0}),this.label=wt.getModuleLabel.bind(this,oa)}shouldRun(){return T.isCurrentPage("shop")}run(){if(!this.hasRun&&this.shouldRun()){ra.use();const t=()=>{this.injectCSSVars();const d=e=>{T.lsSet(f.MARKET_GIRLS_FILTER,e)},y=()=>T.lsGet(f.MARKET_GIRLS_FILTER)||la;let v=na(".g1>div"),i=parseInt(v.find(".number.selected").text().split("/")[0]);v.find(".number").remove();let _=Array.from(v.find(".girl-ico").toArray(),e=>na(e)),x=v.children().length,w=na('<span class="number selected">/</span>');v.append(w);let S=na(`<span>${x}</span>`);w.append(S);let r=na(`<span contenteditable>${i}</span>`);function n(e=i){return(e-1+1)%x+1}function o(e=i){return(e-1+x-1)%x+1}function l(e=i){return v.children().eq(e-1)}function $(){let e=l();e.addClass("not-selected"),l(o()).css("left","-145px"),e.css("left","-145px"),l(n()).css("left","-145px")}function k(e,t=!0,a=!0){a&&$();let s=l(e);s.removeClass("not-selected"),l(o(e)).css("left","0px"),l(n(e)).css("left","290px"),s.css("left","145px"),window.$girl=s,t&&r.text(e),i=e,function(){const e=window["$girl"];{var t,a,s,i;e.attr("class").includes("girl")&&({level:t,name:a,element_data:s,class:i}=e.data("g"),na("#girls_list>.level_target_squared>div>div").attr("chars",t.length),na("#girls_list>.level_target_squared>div>div").text(t),na("#girls_list>h3").text(a),s?na("#girls_list>.icon").attr("src",`${T.getCDNHost()}/pictures/girls_elements/${Jt[s.type]}.png`):na("#girls_list>.icon").attr("carac",i))}}(),na(document).trigger("market:selected-girl-changed")}w.prepend(r),r.on("input",()=>{var e=parseInt(r.text());e<=0||e>x||!Number.isFinite(e)||k(e,!1)});let e=v.parent().find('span[nav="left"]');e.off("click"),e.on("click",()=>{k(o())});let t=v.parent().find('span[nav="right"]');t.off("click"),t.on("click",()=>{k(n())});(()=>{const r=()=>{var e=e=>({label:this.label(`grade${e}`),value:e}),{carac:t,rarity:a,element:s,name:i,range:r,affCategory:n,affLvl:o}=y(),l=T.getAwakeningThreshold(),l=l?l.currentThreshold:GIRL_MAX_LEVEL;return na(`
                    <div style="position:relative">
                        <div id="arena_filter_box" class="form-wrapper" style="display: none;">
                            ${Yt.textInput({id:"sort_name",label:this.label("searchedName"),placeholder:this.label("girlName"),value:i})}
                            ${Yt.selectInput({id:"sort_class",label:this.label("searchedClass"),options:[1,2,3].map(e=>({label:GT.caracs[e],value:e})),value:t})}
                            ${Yt.selectInput({id:"sort_element",label:this.label("searchedElement"),options:["fire","nature","stone","sun","water","darkness","light","psychic"].map(e=>({label:GT.design[`${e}_flavor_element`],value:e})),value:s})}
                            ${Yt.selectInput({id:"sort_rarity",label:this.label("searchedRarity"),options:["starting","common","rare","epic","legendary","mythic"].map(e=>({label:GT.design[`girls_rarity_${e}`],value:e})),value:a})}
                            ${Yt.textInput({id:"sort_level",label:this.label("levelRange"),placeholder:`1-${l}`,value:r})}
                            ${Yt.selectInput({id:"sort_aff_category",label:this.label("searchedAffCategory"),options:["1","3","5","6"].map(e),value:n})}
                            ${Yt.selectInput({id:"sort_aff_lvl",label:this.label("searchedAffLevel"),options:["0","1","2","3","4","5","6"].map(e),value:o})}
                            <div class="button-group">
                                <input type="button" class="blue_button_L" rel="select-team" value="${this.label("team")}" />
                                <label class="clear_girl_filter"><input type="button" class="red_button_L" value="" rel="clear-filter" /></label>
                            </div>
                        </div>
                    </div>`)},n=()=>{var e=T.lsGet(f.TEAMS_DICTIONARY);if(!e)return na(`
                    <div style="position:relative">
                        <div class="team-selection" style="display: none;">
                            <span class="close-team-selection" />
                            ${this.label("visitTeams")}
                        </div>
                    </div>`);const{teamIds:t,teamsDict:a}=e;return na(`
                <div style="position:relative">
                    <div class="team-selection" style="display: none;">
                        <span class="close-team-selection" />
                        <div class="teams-grid-container rarity-background">
                            ${t.map(e=>a[e]).map(e=>`
                                <div class="team-slot-container ${e.iconRarity}" data-id-team="${e.teamId}" data-girl-ids='${JSON.stringify(e.girls)}'>
                                    <img src="${e.icon}" />
                                    ${e.themeIcons?`
                                        <div class="theme-icons">
                                            ${e.themeIcons.map(e=>`<img class="theme-icon" src="${e}"/>`).join("")}
                                        </div>
                                    `:""}
                                </div>
                            `).join("")}
                        </div>
                    </div>
                </div>
                `)};function c(e,c){const{carac:t,rarity:a,element:s,affCategory:i,affLvl:r,name:n,range:o,team:d}=y();let p=t,u=a,g=s,h=i,m=r;var l=n;let f=o.split("-");const b=new RegExp(l,"i");$(),e.forEach((e,t)=>{if(c&&c===e.id)w.before(_[t]);else if(d)d.includes(e.id)?w.before(_[t]):_[t].detach();else{const l=na(e.graded2);var a=`${l.length}`,s=`${l.filter("g:not(.grey):not(.green)").length}`,i=e.class===p||"all"===p,r=e.element_data.type===g||"all"===g,n=e.rarity===u||"all"===u,o=a===h||"all"===h,a=s===m||"all"===m,s=-1<e.name.search(b),e=(!f[0]||e.level>=parseInt(f[0]))&&(!f[1]||e.level<=parseInt(f[1]));i&&r&&n&&s&&e&&o&&a?w.before(_[t]):_[t].detach()}}),x=v.children().length-1,S.text(x),k(1,!0,!1)}var e,t=Array.from(_,e=>({id:na(e).attr("id_girl"),...na(e).data("new-girl-tooltip")}));!function(e,o){let l=r(),t=n(),a=na('<label class="girl_filter"><input type="button" class="blue_button_L" value="" /></label>');e.append(a),e.append(l),e.append(t),a.on("click",function(){na("#arena_filter_box").css("display","block"===na("#arena_filter_box").css("display")?"none":"block")});let s=()=>{(e=>{e={carac:e.find("#sort_class").val(),rarity:e.find("#sort_rarity").val(),element:e.find("#sort_element").val(),affCategory:e.find("#sort_aff_category").val(),affLvl:e.find("#sort_aff_lvl").val(),name:e.find("#sort_name").val(),range:e.find("#sort_level").val()};d(e)})(l),c(o)};const i=e=>{(e=>{e={...la,team:e};d(e)})(e);var{carac:t,rarity:a,element:s,name:i,range:r,affCategory:n,affLvl:e}=y();l.find("#sort_class").val(t),l.find("#sort_rarity").val(a),l.find("#sort_element").val(s),l.find("#sort_aff_category").val(n),l.find("#sort_aff_lvl").val(e),l.find("#sort_name").val(i),l.find("#sort_level").val(r),c(o)};["sort_class","sort_element","sort_rarity","sort_aff_category","sort_aff_lvl"].forEach(e=>{l.find(`#${e}`).on("change",s)}),["sort_name","sort_level"].forEach(e=>{l.find(`#${e}`).on("input",s)}),l.find("[rel=select-team]").click(()=>na(".team-selection").css("display","block"===na(".team-selection").css("display")?"none":"block")),l.find("[rel=clear-filter]").click(()=>{d(la);var{carac:e,rarity:t,element:a,name:s,range:i,affCategory:r,affLvl:n}=y();l.find("#sort_class").val(e),l.find("#sort_rarity").val(t),l.find("#sort_element").val(a),l.find("#sort_aff_category").val(r),l.find("#sort_aff_lvl").val(n),l.find("#sort_name").val(s),l.find("#sort_level").val(i),c(o)}),t.find(".team-slot-container").click(function(){i(na(this).data("girl-ids")),na(".team-selection").css("display","none")}),t.find(".close-team-selection").click(()=>na(".team-selection").css("display","none"))}(na("#girls_list"),t);const a=new URL(window.location.href).searchParams;a.has("girl")?(c(t,e=a.get("girl")),0<(e=na(`[id_girl=${e}]`).index())&&k(e+1)):c(t)})()};T.defer(()=>{if(na("#type_item > .selected").length)t();else{const e=new MutationObserver(()=>{na("#type_item > .selected").length&&(e.disconnect(),t())});e.observe(na("#type_item")[0],{attributes:!0,attributeFilter:["class"],subtree:!0})}}),this.hasRun=!0}}injectCSSVars(){re.registerVar("filter-icon",`url('${Xt}')`),re.registerVar("cross-icon",`url('${T.getCDNHost()}/clubs/ic_xCross.png')`)}};var da=_i(759),pa={};da.Z&&da.Z.locals&&(pa.locals=da.Z.locals);var ua,ga=0,ha={};ha.styleTagTransform=de(),ha.setAttributes=ge(),ha.insert=pe().bind(null,"head"),ha.domAPI=ce(),ha.insertStyleElement=ne(),pa.use=function(e){return ha.options=e||{},ga++||(ua=oe()(da.Z,ha)),pa},pa.unuse=function(){0<ga&&!--ga&&(ua(),ua=null)};const ma=pa,fa=T["$"],ba="marketEquipsFilter",ya=()=>T.lsGet(f.EQUIP_FAVORITES)||[],va=e=>T.lsSet(f.EQUIP_FAVORITES,e),_a="all",xa=new class{get subtype(){return[{value:"1",icon:"pictures/items/ET1.png"},{value:"2",icon:"pictures/items/EH1.png"},{value:"3",icon:"pictures/items/EB1.png"},{value:"4",icon:"pictures/items/ES1.png"},{value:"5",icon:"pictures/items/EF1.png"},{value:"6",icon:"pictures/items/EA1.png"}]}get rarity(){return[{value:"common",bgColor:"#8d8e9f"},{value:"rare",bgColor:"#23b56b"},{value:"epic",bgColor:"#ffb244"},{value:"legendary",bgColor:"#9150bf",bgImage:`url(${T.getCDNHost()}/legendary.png)`}]}get stats(){return[{value:"rainbow",icon:"pictures/misc/items_icons/16.svg"},{value:"hc",icon:"pictures/misc/items_icons/1.png"},{value:"ch",icon:"pictures/misc/items_icons/2.png"},{value:"kh",icon:"pictures/misc/items_icons/3.png"}]}get favorites(){return[{value:!0,icon:"design/ic_star_orange.svg"},{value:!1,icon:"design/ic_star_white.svg"}]}},wa={subtype:{flow:"column",cols:"40px 40px",rows:"1fr 1fr 1fr"},rarity:{flow:"row",cols:"1fr 1fr",rows:"1fr 1fr"},stats:{flow:"row",cols:"1fr 1fr",rows:"1fr 1fr"},favorites:{flow:"row",cols:"1fr auto",rows:"1fr"}},Sa={rainbow:["16"],hc:["1","6","7","8","9"],ch:["2","6","10","11","12"],kh:["3","7","10","13","14"]},$a=({id:r,options:e,gridConfig:t})=>`
    <div class="grid-selector" rel="${r}">
        <div class="clear-selector">
            <input type="radio" name="${r}" id="${r}-all" value="all" checked="checked" />
            <label for="${r}-all">
                <img src="${T.getCDNHost()}/caracs/no_class.png" />
            </label>
        </div>
        <div class="selector-options" style="grid-auto-flow:${t.flow}; grid-template-rows:${t.rows}; grid-template-columns:${t.cols}">
    ${e.map(e=>{var{value:t,icon:a,bgColor:s,bgImage:i}=e;return[{id:e,value:t,icon:a,bgColor:s,bgImage:i}]=[{id:r,value:t,icon:a,bgColor:s,bgImage:i}],`
    <input type="radio" name=${e} id="${e}-${t}" value="${t}"/>
    <label for="${e}-${t}">
        ${a?`<img src="${T.getCDNHost()}/${a}">`:""}
        ${s||i?`<div style="${s?`background-color:${s};`:""}${i?`background-image:${i};background-size:contain;`:""}"></div>`:""}
    </label>
`}).join("")}
        </div>
    </div>
`;const ka=class extends n{constructor(){super({baseKey:ba,label:wt.getModuleLabel("config",ba),default:!0}),this.label=wt.getModuleLabel.bind(this,ba),this.currentFilter={subtype:_a,rarity:_a,stats:_a,favorites:_a}}shouldRun(){return T.isCurrentPage("shop")}applyFilter(){const _=ya(),e=fa("#inventory .armor .slot:not(.empty)");let x=0;e.each((e,t)=>{const a=fa(t);var s,i,r,n,o,l,c,d=a.data("d"),{name_add:p,rarity:u,subtype:g}=d,c=([{identifier:s,id_equip:i,level:r,carac1_equip:n,carac2_equip:o,carac3_equip:l,endurance_equip:c,chance_equip:h,subtype:d}]=[d],[s,d,i,r,n,o,l,c,h].join("_")),h=_.includes(c);let m=a.find(".favorite-toggle");m.length?m.off("click"):(m=this.$favoriteToggle.clone().attr("data-equip-key",c),a.prepend(m)),m.click(this.favoriteToggleCallback),m.attr("data-is-favorite",h);const f=this.currentFilter.subtype===_a||this.currentFilter.subtype===g,b=this.currentFilter.rarity===_a||this.currentFilter.rarity===u,y=this.currentFilter.stats===_a||Sa[this.currentFilter.stats].includes(p),v=this.currentFilter.favorites===_a||JSON.parse(this.currentFilter.favorites)===h;[f,b,y,v].every(e=>e)?(fa(t).removeClass("filtered_out"),x++):fa(t).addClass("filtered_out")});const t=fa("#inventory .armor .inventory_slots > div:first-child()");if(x<12){let e=12-t.find(".slot:visible()").length;for(;0<e;)t.find(".slot").last().after('<div class="slot empty"></div>'),e--}t.getNiceScroll().resize(),fa(document).trigger("market:equip-filter:done")}checkSelection(){const a=fa("#inventory .armor .inventory_slots .selected");if(a.length)if(a.is(":visible"))JSON.parse(a.find(".favorite-toggle").attr("data-is-favorite"))&&fa("#shops #inventory button[rel=sell]").prop("disabled",!0);else{const i=fa("#inventory .armor .inventory_slots > div:first-child()");var s=a.index();let e,t;e=i.find(`.slot:gt(${s}):not(.empty):visible()`),e.length&&(t=e[0]),t||(e=i.find(`.slot:lt(${s}):not(.empty):visible()`),e.length&&(t=e[e.length-1])),t?fa(t).click():fa("#shops #inventory button[rel=sell], #shops #inventory button[rel=use]").prop("disabled",!0)}}run(){if(!this.hasRun&&this.shouldRun()){ma.use(),fa(document).on("market:equips-updated",()=>{this.applyFilter()});const t=()=>{const e=fa('<label class="equip_filter"><input type="button" class="blue_button_L" value="" /></label>'),t=fa(`
            <div style="position:relative">
                <div class="equip_filter_box form-wrapper" style="display: none;">
                    ${["subtype","rarity","stats","favorites"].map(e=>$a({id:e,options:xa[e],gridConfig:wa[e]})).join("")}
                </div>
            </div>`),a=t.find(".equip_filter_box"),s=fa("#inventory .armor");s.append(e).append(t),e.click(()=>a.toggle()),t.find("input").each((e,t)=>{fa(t).change(e=>{var{value:t,name:e}=e.target;this.currentFilter[e]=t,this.applyFilter(),this.checkSelection()})})};this.$favoriteToggle=fa('<div class="favorite-toggle"></div>'),this.favoriteToggleCallback=e=>{const t=fa(e.target);e=`${t.data("equip-key")}`;(JSON.parse(t.attr("data-is-favorite"))?e=>{const t=ya();e=t.indexOf(e);e<0||(t.splice(e,1),va(t))}:e=>{const t=ya();t.includes(e)||(t.push(e),va(t))})(e),this.applyFilter()},T.defer(()=>{this.injectCSSVars(),t(),this.applyFilter();const e=new MutationObserver(()=>this.checkSelection());e.observe(fa("#inventory .armor .inventory_slots > div:first-child()")[0],{subtree:!0,attributes:!0,attributeFilter:["class"]})}),this.hasRun=!0}}injectCSSVars(){re.registerVar("filter-icon",`url('${Xt}')`),re.registerVar("star-icon-white",`url('${T.getCDNHost()}/design/ic_star_white.svg')`),re.registerVar("star-icon-orange",`url('${T.getCDNHost()}/design/ic_star_orange.svg')`)}},Ta={starting:1,common:1,rare:1.2,epic:1.4,legendary:1.6,mythic:4};const Ea=new class{constructor(){this.cache={}}getCachedForRarity(e){var a;return this.cache[e]||(this.cache[e]=(a=Ta[e],Array((window.GIRL_MAX_LEVEL||HH_MAX_LEVEL)-1).fill().map((e,t)=>Math.ceil(10*a*Math.pow(1.0075,t))).reduce((e,t,a)=>(e.push(t+(0===a?0:e[e.length-1])),e),[]))),this.cache[e]}get starting(){return this.getCachedForRarity("starting")}get common(){return this.getCachedForRarity("common")}get rare(){return this.getCachedForRarity("rare")}get epic(){return this.getCachedForRarity("epic")}get legendary(){return this.getCachedForRarity("legendary")}get mythic(){return this.getCachedForRarity("mythic")}};var Ca=_i(334),La={};Ca.Z&&Ca.Z.locals&&(La.locals=Ca.Z.locals);var Ia,Ma=0,Aa={};Aa.styleTagTransform=de(),Aa.setAttributes=ge(),Aa.insert=pe().bind(null,"head"),Aa.domAPI=ce(),Aa.insertStyleElement=ne(),La.use=function(e){return Aa.options=e||{},Ma++||(Ia=oe()(Ca.Z,Aa)),La},La.unuse=function(){0<Ma&&!--Ma&&(Ia(),Ia=null)};const Ra=La,Na="marketXPAff";const Ga=class extends n{constructor(){super({baseKey:Na,label:wt.getModuleLabel("config",Na),default:!0}),this.label=wt.getModuleLabel.bind(this,Na)}shouldRun(){return T.isCurrentPage("shop")}run(){if(!this.hasRun&&this.shouldRun()){Ra.use();const t=e=>{var t=e.data("new-girl-tooltip"),a=e.data("g");if(t&&a){var s=t["rarity"],{Xp:i,level_cap:t}=a,a=t||Hero.infos.level,{cur:t,max:i}=i,a=Ea[s][a-2]-t,i=i-t;const r=e.find('.bar-wrap[rel="xp"]');r.attr("hh_title","XP: "+wt.nThousand(t)),0<a&&r.find(".over").text(this.label("xp",{remainNext:wt.nThousand(i),remainMax:wt.nThousand(a)}))}},a=e=>{var t,a=e.data("g");a&&({Affection:{max:t,cur:a}}=a,a=t-a,e.find('.bar-wrap[rel="aff"] .over span').text(this.label("aff",{remainNext:wt.nThousand(a)})))},i=()=>{var e=$("div.girl-ico:not(.not-selected)");t(e),a(e)};T.defer(()=>{i(),$("#type_item > [type=potion], #type_item > [type=gift]").click(i),$(".g1 > [nav=left], .g1 > [nav=right]").click(i),$(document).on("market:selected-girl-changed",i);const s={potion:t,gift:a};let e=document.querySelector("#inventory button[rel=use]");e.addEventListener("click",function(){const e=$("div.girl-ico:not(.not-selected)");var t=$("#type_item > .selected").attr("type");const a=s[t];a&&(setTimeout(function(){a(e)},500),setTimeout(function(){a(e)},3e3))})}),this.hasRun=!0}}};var Da=_i(829),Pa={};Da.Z&&Da.Z.locals&&(Pa.locals=Da.Z.locals);var Oa,Ha=0,ja={};ja.styleTagTransform=de(),ja.setAttributes=ge(),ja.insert=pe().bind(null,"head"),ja.domAPI=ce(),ja.insertStyleElement=ne(),Pa.use=function(e){return ja.options=e||{},Ha++||(Oa=oe()(Da.Z,ja)),Pa},Pa.unuse=function(){0<Ha&&!--Ha&&(Oa(),Oa=null)};const Ua=Pa,za=T["$"],Ba="marketHideSellButton";const Fa=class extends n{constructor(){super({baseKey:Ba,label:wt.getModuleLabel("config",Ba),default:!0}),this.label=wt.getModuleLabel.bind(this,Ba)}shouldRun(){return T.isCurrentPage("shop")}getSellButton(){return this.$sellButton||(this.$sellButton=za('#shops #inventory button[rel="sell"]')),this.$sellButton}hideButton(){T.lsSet(f.SELL_BUTTON_HIDDEN,!0),this.getSellButton().addClass("hidden")}unhideButton(){T.lsSet(f.SELL_BUTTON_HIDDEN,!1),this.getSellButton().removeClass("hidden")}isButtonHidden(){return T.lsGet(f.SELL_BUTTON_HIDDEN)}run(){!this.hasRun&&this.shouldRun()&&(Ua.use(),T.defer(()=>{var e=this.isButtonHidden();this.$toggleField=za(`
                <label class="hide-sell-toggle">
                    <input type="checkbox" name="hideSellToggle" ${e?'checked="checked"':""} />
                    <span>${this.label("hide")}</span>
                </label>
            `).change(e=>{za(e.target).prop("checked")?this.hideButton():this.unhideButton()}),e&&this.hideButton(),za("#shops_right #inventory").append(this.$toggleField)}),this.hasRun=!0)}};class qa{constructor({aff:e,sc:t,hc:a}){this.aff=e,this.sc=t,this.hc=a}}class Za{constructor(e){this.steps=e,this.totalAffCache={},this.totalSCCache={},this.totalHCCache={}}totalAff(e){if(e>this.steps.length)throw new Error(`bad data for stage ${e}`);return this.totalAffCache[e]||(this.totalAffCache[e]=this.steps.slice(0,e).reduce((e,t)=>e+t.aff,0)),this.totalAffCache[e]}totalSC(e){if(e>this.steps.length)throw new Error(`bad data for stage ${e}`);return this.totalSCCache[e]||(this.totalSCCache[e]=this.steps.slice(0,e).reduce((e,t)=>e+t.sc,0)),this.totalSCCache[e]}totalHC(e){if(e>this.steps.length)throw new Error(`bad data for stage ${e}`);return this.totalHCCache[e]||(this.totalHCCache[e]=this.steps.slice(0,e).reduce((e,t)=>e+t.hc,0)),this.totalHCCache[e]}}const Va={starting:new Za([new qa({aff:90,sc:36e3,hc:36}),new qa({aff:225,sc:9e4,hc:60}),new qa({aff:563,sc:225e3,hc:114}),new qa({aff:1125,sc:45e4,hc:180}),new qa({aff:2250,sc:9e5,hc:300})]),common:new Za([new qa({aff:180,sc:72e3,hc:72}),new qa({aff:450,sc:18e4,hc:120}),new qa({aff:1125,sc:45e4,hc:228}),new qa({aff:2250,sc:9e5,hc:360}),new qa({aff:4500,sc:18e5,hc:600})]),rare:new Za([new qa({aff:540,sc:216e3,hc:216}),new qa({aff:1350,sc:54e4,hc:360}),new qa({aff:3375,sc:135e4,hc:678}),new qa({aff:6750,sc:27e5,hc:1080}),new qa({aff:13500,sc:54e5,hc:1800})]),epic:new Za([new qa({aff:1260,sc:504e3,hc:504}),new qa({aff:3150,sc:126e4,hc:840}),new qa({aff:7875,sc:315e4,hc:1578}),new qa({aff:15750,sc:63e5,hc:2520}),new qa({aff:31500,sc:126e5,hc:4200})]),legendary:new Za([new qa({aff:1800,sc:72e4,hc:720}),new qa({aff:4500,sc:18e5,hc:1200}),new qa({aff:11250,sc:45e5,hc:2250}),new qa({aff:22500,sc:9e6,hc:3600}),new qa({aff:45e3,sc:18e6,hc:6e3})]),mythic:new Za([new qa({aff:4500,sc:18e5,hc:1800}),new qa({aff:11250,sc:45e5,hc:3e3}),new qa({aff:28125,sc:1125e4,hc:5628}),new qa({aff:56250,sc:225e5,hc:9e3}),new qa({aff:112500,sc:45e6,hc:15e3}),new qa({aff:225e3,sc:9e7,hc:18e3})])};var Wa=_i(31),Ka={};Wa.Z&&Wa.Z.locals&&(Ka.locals=Wa.Z.locals);var Ya,Xa=0,Qa={};Qa.styleTagTransform=de(),Qa.setAttributes=ge(),Qa.insert=pe().bind(null,"head"),Qa.domAPI=ce(),Qa.insertStyleElement=ne(),Ka.use=function(e){return Qa.options=e||{},Xa++||(Ya=oe()(Wa.Z,Qa)),Ka},Ka.unuse=function(){0<Xa&&!--Xa&&(Ya(),Ya=null)};const Ja=Ka,es=T["$"],ts="harem",as=["starting","common","rare","epic","legendary","mythic"],ss={starting:1,common:1,rare:2,epic:3,legendary:4,mythic:5};const is=class extends n{constructor(){super({baseKey:ts,label:wt.getModuleLabel("config",ts),default:!0}),this.label=wt.getModuleLabel.bind(this,ts),this.aggregates={girls:0,scPerHour:0,scCollectAll:0,unlockedScenes:0,totalScenes:0,rarities:as.reduce((e,t)=>(e[t]=0,e),{}),caracs:{1:0,2:0,3:0},elements:Qt.reduce((e,t)=>(e[t]=0,e),{}),xpToCap:0,xpToMax:0,gems:Qt.reduce((e,t)=>(e[t]=0,e),{}),aff:0,affSC:0,affHC:0}}shouldRun(){return T.isCurrentPage("harem")&&!T.isCurrentPage("hero")}aggregateStats(){Object.entries(girlsDataList).forEach(([,a])=>{if(a.own){var{salary:e,salary_per_hour:t,rarity:s,class:i,element:r,graded:n,nb_grades:o,level_cap:l,awakening_level:c}=a,o=parseInt(o,10),c=parseInt(c,10);if(this.aggregates.scCollectAll+=e,this.aggregates.rarities[s]++,this.aggregates.caracs[i]++,this.aggregates.elements[r]++,this.aggregates.girls++,this.aggregates.scPerHour+=Math.round(t),this.aggregates.unlockedScenes+=n,this.aggregates.totalScenes+=o,n<o){this.aggregates.aff+=Math.max(Va[s].totalAff(o)-a.Affection.cur,0);let e=0,t=0;0<a.graded&&(e=Va[s].totalSC(a.graded),t=Va[s].totalHC(a.graded)),this.aggregates.affSC+=Va[s].totalSC(o)-e;o=Va[s].totalHC(o)-t;this.aggregates.affHC+=T.isNutakuKobans()?Math.ceil(o/6):o}this.aggregates.xpToMax+=Math.max(Ea[s][GIRL_MAX_LEVEL-2]-a.Xp.cur,0),this.aggregates.xpToCap+=Math.max(Ea[s][l-2]-a.Xp.cur,0),this.aggregates.gems[r]+=((e,a)=>{let t=0;return e<awakening_requirements.length&&(t=awakening_requirements.slice(e).reduce((e,{cost:t})=>e+=t*ss[a],0)),t})(c,s)}})}buildStatsDisplay(){return es(`
            <div class="harem-info-panel">
                ${this.buildGeneralSummary()}
                ${this.buildUpgradeSummary()}
                ${this.buildMarketSummary()}
            </div>
        `)}buildGeneralSummary(){return`
            <div class="summary-block general-summary">
                <h1>${this.label("haremStats")}</h1>
                <div>${this.aggregates.girls} <span class="clubGirl_mix_icn"></span></div>
                <ul class="summary-grid caracs-summary">
                    ${Object.entries(this.aggregates.caracs).map(([e,t])=>`<li><span hh_title="${GT.caracs[e]}"><span carac="${e}"></span><span>${wt.nThousand(t)}</span></span></li>`).join("")}
                </ul>
                <ul class="summary-grid elements-summary">
                    ${Object.entries(this.aggregates.elements).map(([e,t])=>`<li><span hh_title="${GT.design[`${e}_flavor_element`]}"><span class="${e}_element_icn"></span><span>${wt.nThousand(t)}</span></span></li>`).join("")}
                </ul>
                <ul class="summary-grid rarity-summary">
                    ${Object.entries(this.aggregates.rarities).map(([e,t])=>`<li><span hh_title="${GT.design[`girls_rarity_${e}`]}"><span class="rarity-icon slot ${e}"><span class="initial">${GT.design[`girls_rarity_${e}`][0].normalize("NFD").replace(/[\u0300-\u036f]/g,"")}</span></span><span>${wt.nThousand(t)}</span></span></li>`).join("")}
                </ul>
                <ul class="summary-grid xp-aff-summary">
                    <li>
                        <span hh_title="${this.label("haremLevel")}">
                            <span class="xp-aff-label">${GT.design.Lvl}</span>
                            <span>${wt.nThousand(Hero.infos.harem_level)}<br>/ ${wt.nThousand(GIRL_MAX_LEVEL*this.aggregates.girls)}</span>
                        </span>
                    </li>
                    <li>
                        <span hh_title="${this.label("unlockedScenes")}">
                            <span class="xp-aff-label unlocked-scenes-icon" style="background-image:url(${T.getCDNHost()}/design_v2/affstar.png);"></span>
                            <span>${wt.nThousand(this.aggregates.unlockedScenes)}<br>/ ${wt.nThousand(this.aggregates.totalScenes)}</span>
                        </span>
                    </li>
                </ul>
                <ul class="summary-grid salary-summary">
                    <li>
                        <span hh_title="${this.label("income")}">
                            <span class="salary-label" cur="soft_currency"></span>
                            <span>${wt.nThousand(this.aggregates.scPerHour)} / ${GT.time.h}<br>${wt.nThousand(this.aggregates.scCollectAll)} / ${GT.design.harem_collect}</span>
                        </span>
                    </li>
                </ul>
            </div>
        `}buildUpgradeSummary(){return`
            <div class="summary-block upgrade-summary">
                <h1>${this.label("upgrades")}</h1>
                <span>${this.label("toUpgrade")}</span>
                <ul class="summary-grid upgrade-costs">
                    <li>
                        <span hh_title="${GT.design.Affection}">
                            <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_gifts_gray.svg)"></span>
                            <span class="cost-value">${wt.nThousand(this.aggregates.aff)} ${GT.design.Aff}<br>(<span cur="soft_currency"> ${wt.nThousand(417*this.aggregates.aff)}</span>)</span>
                        </span>
                    </li>
                    <li>
                        <span hh_title="${this.label("affectionScenes")}">
                            <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design_v2/affstar.png)"></span>
                            <span class="cost-value">${this.label("or",{left:`<span cur="soft_currency"> ${wt.nThousand(this.aggregates.affSC)}</span><br>`,right:`<span cur="hard_currency"> ${wt.nThousand(this.aggregates.affHC)}</span>`})}</span>
                        </span>
                    </li>
                </ul>
                <h1>${this.label("levelsAwakening")}</h1>
                <span>${this.label("toLevelCap")}</span>
                <ul class="summary-grid upgrade-costs">
                    <li>
                        <span hh_title="${GT.design.Experience}">
                            <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_books_gray.svg)"></span>
                            <span class="cost-value">${wt.nThousand(this.aggregates.xpToCap)} ${GT.design.XP}<br>(<span cur="soft_currency"> ${wt.nThousand(200*this.aggregates.xpToCap)}</span>)</span>
                        </span>
                    </li>
                </ul>
                <span class="to-max-label">${this.label("toLevelMax",{max:GIRL_MAX_LEVEL})}</span>
                <div class="to-max-combi">
                    <ul class="summary-grid upgrade-costs">
                        <li>
                            <span hh_title="${GT.design.Experience}">
                                <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_books_gray.svg)"></span>
                                <span class="cost-value">${wt.nThousand(this.aggregates.xpToMax)} ${GT.design.XP}<br>(<span cur="soft_currency"> ${wt.nThousand(200*this.aggregates.xpToMax)}</span>)</span>
                            </span>
                        </li>
                    </ul>
                    <ul class="summary-grid gems-summary">
                        ${Object.entries(this.aggregates.gems).map(([e,t])=>`<li><span hh_title="${GT.design[`${e}_gem`]}"><span class="gem-icon" style="background-image: url(${T.getCDNHost()}/pictures/design/gems/${e}.png)"></span><span>${wt.nThousand(t)}</span></span></li>`).join("")}
                    </ul>
                </div>
            </div>
        `}buildMarketSummary(){var a=T.lsGet(f.MARKET_INFO);let s="";if(a){var{buyableItems:i,sellableItems:r,refreshTime:n,refreshLevel:o}=a;let e="",t="";e=n<server_now_ts||o<Hero.infos.level?`
                    <span>${this.label("buyable")}</span>
                    <p class="market-warning">${this.label("marketRestocked")}</p>
                `:i?({aff:a,xp:i}=i,`
                    <span>${this.label("buyable")}</span>
                    <ul class="summary-grid upgrade-costs">
                        <li>
                            <span hh_title="${this.label("books")}">
                                <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_books_gray.svg)"></span>
                                <span class="cost-value">
                                    ${this.label("canBeBought",{item:`${wt.nThousand(i.sc.value)} ${GT.design.XP} (${i.sc.count})`,amount:`<span cur="soft_currency"> ${wt.nThousand(i.sc.cost)}</span>`})}<br>
                                    ${this.label("canBeBought",{item:`${wt.nThousand(i.hc.value)} ${GT.design.XP} (${i.hc.count})`,amount:`<span cur="hard_currency"> ${wt.nThousand(i.hc.cost)}</span>`})}
                                </span>
                            </span>
                        </li>
                        <li>
                            <span hh_title="${this.label("gifts")}">
                                <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_gifts_gray.svg)"></span>
                                <span class="cost-value">
                                    ${this.label("canBeBought",{item:`${wt.nThousand(a.sc.value)} ${GT.design.Aff} (${a.sc.count})`,amount:`<span cur="soft_currency"> ${wt.nThousand(a.sc.cost)}</span>`})}<br>
                                    ${this.label("canBeBought",{item:`${wt.nThousand(a.hc.value)} ${GT.design.Aff} (${a.hc.count})`,amount:`<span cur="hard_currency"> ${wt.nThousand(a.hc.cost)}</span>`})}
                                </span>
                            </span>
                        </li>
                    </ul>
                    <p class="restock-info">
                        ${this.label("marketRestock",{time:new Date(1e3*n).toLocaleString(wt.getLang()),level:o+1})}
                    </p>
                `):`
                    <span>${this.label("buyable")}</span>
                    <p class="market-warning">${this.label("visitMarket")}</p>
                `,t=r?({xp:o,aff:r}=r,`
                    <span>${this.label("sellable")}</span>
                    <ul class="summary-grid upgrade-costs">
                        <li>
                            <span hh_title="${this.label("books")}">
                                <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_books_gray.svg)"></span>
                                <span class="cost-value">
                                    ${wt.nThousand(o.value)} ${GT.design.XP} (${o.count})<br>
                                    ${this.label("canBeSold",{sc:`<span cur="soft_currency"> ${wt.nThousand(o.cost)}</span>`})}
                                </span>
                            </span>
                        </li>
                        <li>
                            <span hh_title="${this.label("gifts")}">
                                <span class="affection-label" style="background-image:url(${T.getCDNHost()}/design/ic_gifts_gray.svg)"></span>
                                <span class="cost-value">
                                    ${wt.nThousand(r.value)} ${GT.design.Aff} (${r.count})<br>
                                    ${this.label("canBeSold",{sc:`<span cur="soft_currency"> ${wt.nThousand(r.cost)}</span>`})}
                                </span>
                            </span>
                        </li>
                    </ul>
                    <ul class="summary-grid gems-stock">
                        ${Qt.map(e=>`<li><span hh_title="${GT.design[`${e}_gem`]}"><span class="gem-icon" style="background-image: url(${T.getCDNHost()}/pictures/design/gems/${e}.png)"></span><span>${wt.nThousand(parseInt(player_gems_amount[e].amount),10)}</span></span></li>`).join("")}
                    </ul>
                `):`
                    <span>${this.label("sellable")}</span>
                    <p class="market-warning">${this.label("visitMarket")}</p>
                `,s=t+e}else s=`
                <p class="market-warning">${this.label("visitMarket")}</p>
            `;return`
            <div class="summary-block market-summary">
                <h1>${this.label("market")}</h1>
                ${s}
            </div>
        `}attachToPage(e){const t=es('<div class="harem-info-panel-toggle clubGirl_mix_icn"></div>'),a=es('<div class="harem-info-overlay-bg"></div>');es("#harem_left").append(t).append(e).append(a),t.click(()=>{e.hasClass("visible")?(e.removeClass("visible"),a.removeClass("visible")):(e.addClass("visible"),a.addClass("visible"))}),a.click(()=>{e.removeClass("visible"),a.removeClass("visible")})}attachWikiLink(e,t){if(!T.isCxH()){var a=girlsDataList[e],e=T.getWikiLink(a.name,wt.getLang());if(!a.own){const s=t.find(".WikiLinkDialogbox > a");s.length?s.attr("href",e):t.find(".middle_part.missing_girl .dialog-box").append(`<div class="WikiLinkDialogbox"><a href="${e}" target="_blank">${this.label("wikiPage",{name:a.name})}</a></div>`)}if(a.own){const i=t.find(".WikiLink a");i.length?i.attr("href",e):t.find(".middle_part h3").wrap(`<div class="WikiLink"><a href="${e}" target="_blank"></a></div>`)}}}attachSceneCostsAndStats(e,t){const a=t.find("a.later");if(a.length){const n=girlsDataList[e];a.each((e,t)=>{const a=es(t);var s=a.index(),i=n["rarity"],r=Va[i].totalAff(s+1)-n.Affection.cur,{sc:t,hc:i}=Va[i].steps[s],s=T.isNutakuKobans()?1/6:1,s=`
                <div class="scene-costs-tooltip">
                    ${wt.nThousand(r)} ${GT.design.Aff}<br>
                    ${this.label("or",{left:`<span cur="soft_currency"> ${wt.nThousand(t)}</span><br>`,right:`<span cur="hard_currency"> ${wt.nThousand(Math.ceil(i*s))}</span>`})}
                </div>
            `.replace(/(\n| {4})/g,"");a.attr("hh_title",s)})}}onGirlSelectionChanged(e,t){this.attachWikiLink(e,t),this.attachSceneCostsAndStats(e,t)}run(){!this.hasRun&&this.shouldRun()&&(Ja.use(),T.defer(()=>{this.aggregateStats(),this.attachToPage(this.buildStatsDisplay());var e=()=>{const e=es("#harem_right [girl]");var t;e.length&&(t=e.attr("girl"),this.currentGirlId!==t&&(this.currentGirlId=t,this.onGirlSelectionChanged(t,e)))};new MutationObserver(e).observe(es("#harem_right")[0],{childList:!0}),e()}),this.hasRun=!0)}};var rs=_i(72),ns={};rs.Z&&rs.Z.locals&&(ns.locals=rs.Z.locals);var os,ls=0,cs={};cs.styleTagTransform=de(),cs.setAttributes=ge(),cs.insert=pe().bind(null,"head"),cs.domAPI=ce(),cs.insertStyleElement=ne(),ns.use=function(e){return cs.options=e||{},ls++||(os=oe()(rs.Z,cs)),ns},ns.unuse=function(){0<ls&&!--ls&&(os(),os=null)};const ds=ns,ps="league",us=[4,15,30];const gs=class extends n{constructor(){super({baseKey:ps,label:wt.getModuleLabel("config",ps),default:!0,subSettings:[{key:"board",label:wt.getModuleLabel("config",`${ps}_board`),default:!0},{key:"promo",label:wt.getModuleLabel("config",`${ps}_promo`),default:!0}]}),this.label=wt.getModuleLabel.bind(this,ps),this.aggregates={challengesDone:0,challengesPossible:0,challengesTotal:0,playersTotal:0,levelRange:{min:0,max:0,median:0},playerRank:0,playerScore:0,tops:{},demotions:{},demoteThreshold:0,avg:0,scoreExpected:0},this.possibleChallengesTooltip=""}shouldRun(){return T.isCurrentPage("tower-of-fame")}run({board:e,promo:t}){!this.hasRun&&this.shouldRun()&&(ds.use(),T.defer(()=>{this.injectCSSVars(),this.aggregateData(),this.displaySummary({board:e,promo:t}),this.manageHideFoughtOpponents(),this.manageTableAnnotations()}),this.hasRun=!0)}injectCSSVars(){re.registerVar("legendary-bg",`url("${T.getCDNHost()}/legendary.png")`)}aggregateData(){const{leagues_list:e,season_end_at:t,Hero:a}=window;var s=e.length;this.aggregates.playersTotal=s;const n={},o=s-14,l=s-15;this.aggregates.demoteThreshold=o;const c=[...us,...us.map(e=>e+1)],d=[];e.forEach(({nb_challenges_played:e,level:t,place:a,class:s,html:i})=>{const r=$(i.replace(/[\n\t]/g,""));d.push(parseInt(t,10));t=wt.parseLocaleRoundedInt(r.eq(4).text());n[a]=t,c.includes(a)&&(this.aggregates.tops[a]=t),o===a?this.aggregates.demotions.demote=t:l===a&&(this.aggregates.demotions.nonDemote=t),s&&s.includes("personal_highlight")?(this.aggregates.playerRank=a,this.aggregates.playerScore=t):this.aggregates.challengesDone+=parseInt(e,10)});var i=parseInt(Math.floor(t/60),10),r=a.energies.challenge.amount!==a.energies.challenge.max_amount?Math.floor((i+(35-a.energies.challenge.next_refresh_ts/60))/35)+parseInt(a.energies.challenge.amount,10):Math.floor(i/35)+parseInt(a.energies.challenge.amount,10);this.aggregates.challengesPossible=r,d.sort((e,t)=>e-t);var p=Math.floor(d.length/2);this.aggregates.levelRange={min:Math.min(...d),max:Math.max(...d),median:d.length%2?d[p]:(d[p-1]+d[p])/2};var{challengesDone:u,playerScore:i}=this.aggregates,r=3*(s-1);this.aggregates.challengesTotal=r;var p=0!==u?i/u:0,s=Math.round(100*p)/100,u=Math.floor(p*r),p={points:i,avg:s},r=(T.lsGet(f.LEAGUE_SCORE)||{points:0,avg:0})["points"];r<i&&T.lsSet(f.LEAGUE_SCORE,p),this.aggregates.avg=s,this.aggregates.scoreExpected=u}displaySummary({board:s,promo:i}){const{challengesDone:e,challengesPossible:t,challengesTotal:a,playerScore:r,playerRank:n,tops:o,demotions:l,demoteThreshold:c,avg:d,scoreExpected:p}=this.aggregates;let u="",g="";if(s&&(u=us.map(e=>{var{diff:t,score:a,symbol:s,labelKey:i}=((e,t,a,s,i)=>{let r="",n,o,l;return l=e<=a?(o=i,n=t-i,n&&(r="-"),"stayInTop"):(o=s+1,n=o-t,r="+","notInTop"),{symbol:r,diff:n,score:o,labelKey:l}})(n,r,e,o[e],o[e+1]);return`<span class="minTop${e}" hh_title="${this.label(i,{points:wt.nThousand(a),top:e})}"><span class="scriptLeagueInfoIcon top${e}" />${s}${wt.nThousand(t)}</span>`}).join("")),i){var h=window["league_tag"],{demote:m,nonDemote:f}=l,s=1<h,i=h<9,b=0===r,h=n<=15,m=s&&(b||r<=m);let e,t,a;s&&(m?b?(e=this.label("willDemoteZero"),t=this.label("toNotDemote")):e=this.label("willDemote",{points:f}):e=this.label("toDemote",{players:c-n})),i&&(h?b||(a=this.label("toStay",{players:16-n})):a=this.label("willStay",{points:o[15]}));b=[a,t,e].filter(e=>e).map(e=>`<p>${e}</p>`).join("");g=`
                <span class="promotionInfo" hh_title="${b}">
                    <img src="${T.getCDNHost()}/leagues/ic_rankup.png" style="height: 15px; width: 12px; margin-left: 6px; margin-bottom: 0px;">
                </span>
            `}b=a-e;this.possibleChallengesTooltip=`${this.label("challengesRegen",{challenges:t})}<br/>${this.label("challengesLeft",{challenges:b})}`;b=`
            <div class="scriptLeagueInfo">
                <span class="averageScore" hh_title="${this.label("averageScore",{average:wt.nThousand(d)})}<br/>${this.label("scoreExpected",{score:wt.nThousand(p)})}"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOG1tIiBoZWlnaHQ9IjhtbSIgdmlld0JveD0iMCAwIDggOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnPjxnIGFyaWEtbGFiZWw9IngiIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNzI1MTE7ZmlsbDojZmZmIj48cGF0aCBkPSJNIDcuMDM5NTA1OCw3LjUyNzEyNjggSCA0LjQyMzQwOTcgViA2Ljk2MDMwNiBIIDUuMTQyODM2MiBMIDMuOTExMDkwOSw1LjI3MDc0NCAyLjY3OTM0NTcsNi45NjAzMDYgSCAzLjQwOTY3MjUgViA3LjUyNzEyNjggSCAxLjI2MjI5MzcgViA2Ljk2MDMwNiBIIDIuMDE0NDIxMyBMIDMuNTczMTc4NSw0LjgxMjkyNzEgMS44NTA5MTUzLDIuNDM2NjM5OSBIIDEuMTUzMjg5NyBWIDEuODY5ODE5MSBIIDMuNjgyMTgyNSBWIDIuNDM2NjM5OSBIIDMuMDA2MzU3NyBsIDEuMTg4MTQzNiwxLjYzNTA2IDEuMTg4MTQzNywtMS42MzUwNiBIIDQuNjE5NjE3IFYgMS44Njk4MTkxIGggMi4xODAwOCBWIDIuNDM2NjM5OSBIIDYuMDQ3NTY5NCBMIDQuNTMyNDEzOCw0LjUyOTUxNjcgNi4yOTgyNzg2LDYuOTYwMzA2IGggMC43NDEyMjcyIHoiLz48L2c+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2ZmZjtzdHJva2Utd2lkdGg6MC41MDM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgZD0ibSAxLjE1OTc0NTIsMC44MDk3MjA5NCBoIDUuNjQ3Ii8+PC9nPjwvc3ZnPgo=" style="height: 15px; width: 16px; margin-left: 2px; margin-bottom: 0px;">${wt.nThousand(d)}</span>
                <span class="possibleChallenges" hh_title="${this.possibleChallengesTooltip}"><img src="${T.getCDNHost()}/league_points.png" style="height: 15px; width: 16px; margin-left: 6px; margin-bottom: 0px;">${t}/${b}</span>
                ${u}
                ${g}
            </div>
        `;$("div.league_end_in").append(b)}manageHideFoughtOpponents(){function e(){let e=document.getElementsByClassName("leadTable")[0];if(e){let t=e.getElementsByTagName("tr");for(let e=0;e<t.length;e++)try{const a=$(t[e]).attr("sorting_id");"3"===leagues_list.find(({id_player:e})=>e===a).nb_challenges_played&&(t[e].style.display="none")}catch(e){}}}let t=T.lsGet(f.FOUGHT_OPPONENTS_HIDDEN);$(".league_end_in").append('<button id="beaten_opponents" class=""><span id="hide_beaten"></span></button>');const a=()=>{var e=this.label("showFoughtOpponents");$("#hide_beaten").html(`<img alt="${e}" hh_title="${e}" src="${T.getCDNHost()}/quest/ic_eyeopen.svg">`)},s=()=>{var e=this.label("hideFoughtOpponents");$("#hide_beaten").html(`<img alt="${e}" hh_title="${e}" src="${T.getCDNHost()}/quest/ic_eyeclosed.svg">`)};t?(e(),a()):s();let i=document.querySelector("#beaten_opponents");var r;i.addEventListener("click",function(){t?(function(){const e=document.getElementsByClassName("leadTable")[0];if(e){const t=e.getElementsByTagName("tr");for(let e=0;e<t.length;e++)try{const a=$(t[e]).attr("sorting_id");"3"===leagues_list.find(({id_player:e})=>e===a).nb_challenges_played&&(t[e].style.display="")}catch(e){}}}(),s()):(e(),a()),t=!t,T.lsSet(f.FOUGHT_OPPONENTS_HIDDEN,t)});for(r of document.querySelectorAll("span[sort_by]"))r.addEventListener("click",function(){t&&e(),$(document).trigger("league:table-sorted")})}manageTableAnnotations(){const t=()=>{var e=playerLeaguesData.id_fighter;let a;try{a=T.lsGet(f.LEAGUE_POINT_HISTORY)[e].points}catch(e){a=[]}for(let t=0;t<3;t++){let e=$(".result")[t];""!==e.innerText&&(e.innerText=a[t]||"?")}var i=T.lsGet(f.LEAGUE_RESULTS)||{};const r=T.lsGet(f.LEAGUE_POINT_HISTORY)||{};let n=!1;for(let t=0;t<this.aggregates.playersTotal;t++){let a=$(".leagues_table .lead_table_view tbody.leadTable tr:nth-child("+(t+1)+")"),s=a.attr("sorting_id"),e=i[s];if(e&&(0===a.find(".classLeague").length&&a.find(".square-avatar-wrapper").append($('<div class="classLeague"></div>')),e.themeIcons)){const l=a.find(".classLeague");l.empty(),e.themeIcons.forEach(e=>{l.append(`<img class="theme-icon" src="${e}"/>`)})}if(!a.hasClass("personal_highlight")){let t;const c=leagues_list.find(({id_player:e})=>e===s);try{t=r[s].points,"3"===c.nb_challenges_played&&3<t.length&&(t=function(a){console.log("resolving scores",a);const s={4:[0,1,3],5:[0,3,4],6:[3,4,5]};var e=a.filter((e,t)=>s[a.length].includes(t));return console.log("resolved to:",e),e}(t),r[s].points=t,n=!0)}catch{t=[]}let e="";var o="1"===T.lsGetRaw(f.TABLE_SHOW_INDIVIDUAL);e=o?[0,1,2].map(e=>e<parseInt(c.nb_challenges_played)?t[e]||"?":"-").join("/"):`${c.nb_challenges_played}/3`,a.hasClass("selected-player-leagues")||(a[0].children[3].innerText=e)}}n&&T.lsSet(f.LEAGUE_POINT_HISTORY,r)},l=()=>{var e,t=T.lsGet(f.LEAGUE_RESULTS)||{},a=$("#leagues_middle .leadTable tr").length,s=a-1;T.lsSet(f.LEAGUE_PLAYERS,s);let i=0;for(let e=0;e<a;e++)i+=parseInt(leagues_list[e].nb_challenges_played);let r=0,n=0;for(e in t)r+=t[e].victories,n+=t[e].defeats;var o=3*s-i,l=i-r-n;T.lsSet(f.LEAGUE_UNKNOWN,l);var{min:c,max:d,median:p}=this.aggregates.levelRange,u=`
                <hr/>
                <span id="leagueStats"><u>${this.label("currentLeague")}</u>
                <table>
                    <tbody>
                        <tr><td>${this.label("victories")} :</td><td><em>${r}</em>/<em>${3*s}</em></td></tr>
                        <tr><td>${this.label("defeats")} :</td><td><em>${n}</em>/<em>${3*s}</em></td></tr>
                        <tr><td>${this.label("unknown")} :</td><td><em>${l}</em>/<em>${3*s}</em></td></tr>
                        <tr><td>${this.label("notPlayed")} :</td><td><em>${o}</em>/<em>${3*s}</em></td></tr>
                        <tr><td>${this.label("levelRange")} :</td><td><em>${c}</em>…<em>${p}</em>…<em>${d}</em></td></tr>
                    </tbody>
                </table>
                </span>`,g=T.lsGet(f.LEAGUE_RESULTS_OLD)||{},l=T.lsGet(f.LEAGUE_PLAYERS_OLD)||0,o=T.lsGet(f.LEAGUE_UNKNOWN_OLD)||0,s=T.lsGet(f.LEAGUE_SCORE_OLD)||{},c=T.lsGet(f.LEAGUE_TIME_OLD)||0;let h="";if(0<c){let e=0,t=0;var m,p=s.points||0,d=s.avg||0;for(m in g)e+=g[m].victories,t+=g[m].defeats;s=3*l-e-t-o,o={year:"numeric",month:"short",day:"numeric"},o=new Date(1e3*c).toLocaleDateString(wt.getLang(),o);h=`
                    <hr/>
                    <span id="oldLeagueStats">
                        ${this.label("leagueFinished",{date:`<em>${o}</em>`})}
                        <table>
                            <tbody>
                                <tr><td>${this.label("victories")} :</td><td><em>${e}</em>/<em>${3*l}</em></td></tr>
                                <tr><td>${this.label("defeats")} :</td><td><em>${t}</em>/<em>${3*l}</em></td></tr>
                                <tr><td>${this.label("notPlayed")} :</td><td><em>${s}</em>/<em>${3*l}</em></td></tr>
                                <tr><td>${this.label("opponents")} :</td><td><em>${l}</em></td></tr>
                                <tr><td>${this.label("leaguePoints")} :</td><td><em>${wt.nThousand(p)}</em></td></tr>
                                <tr><td>${this.label("avg")} :</td><td><em>${wt.nThousand(d)}</em></td></tr>
                            </tbody>
                        </table>
                    </span>`}u=`${this.possibleChallengesTooltip}${u}${h}`;$(".possibleChallenges").attr("hh_title",u)},e=()=>{let e=T.lsGet(f.LEAGUE_RESULTS)||{};var t=`${playerLeaguesData.id_fighter}`,a=playerLeaguesData.class;let s=$("#leagues_middle .selected-player-leagues .theme-container img");s.length||(s=$("#leagues_right .team-theme"));var i=s.map((e,t)=>$(t).attr("src")).toArray();let r=window.match_history[t];var n=r.filter(e=>"won"===e).length,o=r.filter(e=>"lost"===e).length;e[t]={victories:n,defeats:o,class:a,themeIcons:i},T.lsSet(f.LEAGUE_RESULTS,e),l()};e(),t();$(document).on("league:table-sorted",()=>{t()});const a=T.lsGetRaw(f.TABLE_SHOW_INDIVIDUAL)||"0",s=[{label:"22/21/-",value:"1"},{label:"2/3",value:"0"}].map(e=>T.$(`
            <label>
                <input type="radio" name="leagueTableShowIndividual" value="${e.value}" ${e.value===a?"checked":""} />
                <span>${e.label}</span>
            </label>
        `).change(e=>{T.lsSetRaw(f.TABLE_SHOW_INDIVIDUAL,e.target.value),t()})),i=$('<div class="individualDisplaySwitch"></div>');s.forEach((e,t)=>{0<t&&i.append("&middot;"),i.append(e)}),$(".league_end_in").append(i),$(document).on("league:player-selected",()=>{e(),t()})}};var hs=_i(520),ms={};hs.Z&&hs.Z.locals&&(ms.locals=hs.Z.locals);var fs,bs=0,ys={};ys.styleTagTransform=de(),ys.setAttributes=ge(),ys.insert=pe().bind(null,"head"),ys.domAPI=ce(),ys.insertStyleElement=ne(),ms.use=function(e){return ys.options=e||{},bs++||(fs=oe()(hs.Z,ys)),ms},ms.unuse=function(){0<bs&&!--bs&&(fs(),fs=null)};const vs=ms,_s=()=>{const e=T.getGirlDictionary();if(!e)return 0;let a=0;return e.forEach(e=>{var{own:t,nb_grades:e}=e;t&&1<parseInt(e)&&a++}),a};const xs=new class{get pantheon(){return!T.isCxH()&&15<=window.Hero.infos.level}get leagues(){return 20<=window.Hero.infos.level}get seasons(){var{Hero:{infos:{questing:{id_quest:e,id_world:t}}}}=window;return 1<t||4<e}get pop(){var{Hero:{infos:{questing:{id_world:e}}}}=window;return!T.isCxH()&&3<=e}get champs(){var{Hero:{infos:{questing:{id_quest:e}}}}=window;return!(T.isCxH()&&e<3060||!T.isCxH()&&e<320)&&15<=_s()}get clubs(){return!T.isCxH()&&15<=_s()}},ws=T["$"],Ss="resourceBars",$s={1:"green",.5:"yellow",.2:"red"};const ks=class extends n{constructor(){super({baseKey:Ss,label:wt.getModuleLabel("config",Ss),default:!0}),this.label=wt.getModuleLabel.bind(this,Ss),this.activeBoosters={}}shouldRun(){return!0}run(){!this.hasRun&&this.shouldRun()&&(vs.use(),T.defer(()=>{this.injectCSSVars(),this.forceTimerInterval(),this.addEnergyBarShortcut(),this.addQuestAndFightTooltips(),this.addAdditionalBars(),this.addPoPTimer(),this.addBoosterStatus()}),this.hasRun=!0)}injectCSSVars(){re.registerVar("challenge-token-icon",`url("${T.getCDNHost()}/league_points.png")`)}forceTimerInterval(){HHTimers.thresholdSec=86400,HHTimers.thresholdTenSec=64800;var e=[...HHTimers.timersListMin,...HHTimers.timersListTenSec];HHTimers.timersListMin=[],HHTimers.timersListTenSec=[],HHTimers.timersListSec.push(...e)}addEnergyBarShortcut(){let e;const t=Hero.infos.questing.current_url;var a=T.lsGet(f.SIDEQUEST_STATUS);e=t.includes("quest")?t:a&&a.energySpendAvailable&&a.continueLink?a.continueLink:a&&a.energySpendAvailable?"/side-quests.html":"/champions-help.html",ws(".energy_counter[type=quest] .bar-wrapper").wrap(`<a href="${e}"></a>`)}addQuestAndFightTooltips(){Object.entries({quest:"hudEnergy_mix_icn",fight:"hudBattlePts_mix_icn"}).forEach(([e,t])=>{var a=Hero.energies[e]["recharge_time"];let s;s=0<a?(a=a+server_now_ts,a=`<span class="orange">${new Date(1e3*a).toLocaleTimeString(wt.getLang(),{hour:"2-digit",minute:"2-digit"})}</span>`,this.label("fullAt",{time:a})):`<span class="orange">${GT.design.Full}</span>`,ws(`header .energy_counter[type=${e}] .${t}`).attr("generic-tooltip",s)})}addAdditionalBars(){let l=ws("header .energy_counter[type=fight]");[{type:"kiss",feature:"seasons",iconClass:"hudKiss_mix_icn",shortcutLink:"/season-arena.html"},{type:"challenge",feature:"leagues",iconClass:"hudChallenge_mix_icn",shortcutLink:"/tower-of-fame.html"},{type:"worship",feature:"pantheon",iconClass:"hudWorship_mix_icn",shortcutLink:"/pantheon.html"}].forEach(({type:e,feature:t,iconClass:a,shortcutLink:s})=>{if(!xs[t]){var i=ws(`<div class="script-bar-spacer" type="${e}" id="canvas_${e}_energy"></div>`);return l.after(i),void(l=i)}var{amount:r,max_amount:n,seconds_per_point:o,next_refresh_ts:t,recharge_time:i}=Hero.energies[e],i=ws((({type:e,timeForSinglePoint:t,timeOnLoad:a,iconClass:s,currentVal:i,max:r,shortcutLink:n,fullIn:o},l)=>{let c;return c=0<o?(o=server_now_ts+o,l("fullAt",{time:`<span class=&quot;orange&quot;>${new Date(1e3*o).toLocaleTimeString(wt.getLang(),{hour:"2-digit",minute:"2-digit"})}</span>`})):`<span class=&quot;orange&quot;>${GT.design.Full}</span>`,`
        <div class="energy_counter" type="${e}" id="canvas_${e}_energy">
            <div class="energy_counter_bar">
                <div class="energy_counter_icon"><span generic-tooltip="${c}" class="${s}"></span></div>
                <a href="${n}">
                    <div class="bar-wrapper">
                        <div class="bar red" style="width:${100*Math.min(i,r)/r}%"></div>
                        <div class="over">
                            <div class="energy_counter_amount">
                                <span energy>${i}</span>/<span rel="max">${r}</span>
                            </div>
                            <span rel="count_txt" timeforsinglepoint="${t}" ${r<=i?'style="display:none;"':`timeonload="${a}"`}>
                                ${GT.design.more_in} <span rel="count"></span>
                            </span>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    `})({type:e,iconClass:a,shortcutLink:s,currentVal:r,max:n,timeForSinglePoint:o,timeOnLoad:t,fullIn:i},this.label));l.after(i),l=i,r<n&&(n=HHTimers.initEnergyTimer(ws(`header .energy_counter[type="${e}"]`)),Hero.c||(Hero.c={}),Hero.c[e]||(Hero.c[e]=n)),"challenge"!==e||T.isCurrentPage("tower-of-fame")||(window.hasMultipleLeagueBattles=!1)})}addPoPTimer(){if(xs.pop){var i=T.lsGet(f.TRACKED_TIMES);let e=0,t=1,a;i&&i.pop&&(e=Math.max(i.pop-server_now_ts,0),t=i.popDuration,a=`<span class=&quot;orange&quot;>${new Date(1e3*i.pop).toLocaleTimeString(wt.getLang(),{hour:"2-digit",minute:"2-digit"})}</span>`);var r=0<e;let s=100;r&&(s=100*(t-e)/t);const n=ws(`
            <a class="script-pop-timer" href="/activities.html?tab=pop">
                <div class="hh_bar finish_in_bar" ${r?`generic-tooltip="${this.label("readyAt",{time:a})}"`:""}>
                    <div class="backbar borderbar">
                        <div class="frontbar ${r?"pinkbar":"bluebar"}" style="width: ${s}%"></div>
                    </div>
                    <div class="text">${r?this.label("popsIn",{time:`<span>${window.format_time_short(e)}</span>`}):this.label("popsReady")}</div>
                </div>
            </a>
        `);ws("header .currency").before(n),0<e&&(r={show:i=()=>{},hide:i,selector:""},i=window.is_mobile_size,window.is_mobile_size=()=>!1,HHTimers.initBarTimer(t,e,r,{barElm:n.find(".frontbar"),textElm:n.find("div.text>span")},()=>{n.find(".text").text(this.label("popsReady")),n.find(".pinkbar").addClass("bluebar").removeClass("pinkbar")}),window.is_mobile_size=i)}}addBoosterStatus(){const t=T.lsGet(f.BOOSTER_STATUS)||{normal:[],mythic:[]};t.normal=t.normal.filter(({endAt:e})=>e>server_now_ts),Object.keys(t).forEach(e=>{t[e].length<3&&(t[e]=[...t[e],...Array(3-t[e].length).fill({empty:!0})])});const h=ws('<a class="script-booster-status" href="/shop.html?type=booster"></a>'),n=e=>{var{empty:t,id_item:a,identifier:s,rarity:i,endAt:r}=e;if(t)return'<div class="slot empty"></div>';e.expiry=r-server_now_ts;r=new Date(1e3*r).toLocaleTimeString(wt.getLang(),{hour:"2-digit",minute:"2-digit"}).replace(/(\d)/g,e=>`${e}<i></i>`);return ws(`
                <div class="slot ${i}" id_item="${a}" data-d="${JSON.stringify(e).replace(/"/g,"&quot;")}" additional-tooltip-info="${JSON.stringify({additionalText:`<span class="script-tooltip"></span>${this.label("endAt",{time:r})}`}).replace(/"/g,"&quot;")}">
                    <img src="${T.getCDNHost()}/pictures/items/${s}.png"/>
                </div>`)},o=e=>{var{empty:t,id_item:a,identifier:s}=e;return t?'<div class="slot mythic empty"></div>':ws(`
                <div class="slot mythic" id_item="${a}" data-d="${JSON.stringify(e).replace(/"/g,"&quot;")}" additional-tooltip-info="${JSON.stringify({additionalText:'<span class="script-tooltip"></span>'}).replace(/"/g,"&quot;")}">
                    <img src="${T.getCDNHost()}/pictures/items/${s}.png"/>
                </div>
            `)},m=(e,n,t)=>{const a=Math.min(e/n,1);var s=2*Math.min(a,.5),i=2*Math.max(a-.5,0);let o="";0<a&&Object.entries($s).forEach(([e,t])=>{a<=e&&(o=t)});const l=ws(`
                <div class="circular-progress">
                    <div class="circle">
                        <div class="circle-bar left">
                            <div class="progress ${o}" style="transform: rotate(${180*i}deg)"></div>
                        </div>
                        <div class="circle-bar right">
                            <div class="progress ${o}" style="transform: rotate(${180*s}deg)"></div>
                        </div>
                        ${t?'<div class="dummy-timer-target" style="display: none;"></div>':""}
                    </div>
                </div>
            `);if(t){let r;r=HHTimers.initDecTimer(l.find(".dummy-timer-target"),e,()=>{l.find(".slot").attr("class","slot empty").empty().attr("data-d","").attr("tooltip-id","").attr("id_item",""),l.find(".progress").css("transform","rotate(0deg)")},()=>{if(r){const a=HHTimers.timers[r].remainingTime/n;var e=2*Math.min(a,.5),t=2*Math.max(a-.5,0);0<a&&Object.entries($s).forEach(([e,t])=>{a<=e&&(o=t)});const s=l.find(".left .progress"),i=l.find(".right .progress");s.css("transform",`rotate(${180*t}deg)`).attr("class",`progress ${o}`),i.css("transform",`rotate(${180*e}deg)`).attr("class",`progress ${o}`)}})}return l},l=(e,t,a)=>{var{empty:s,rarity:i,id_m_i:r,usages:n,usages_remaining:o,duration:l,endAt:c}=t,t=e(t);let d=0,p=1,u=!1;i="mythic"===i;s||(i?(d=o,p=n):(d=c-server_now_ts,p=l,u=!0));const g=m(d,p,u);g.prepend(t),a?h.find(`.circular-progress:has(.empty${i?".mythic":":not(.mythic)"})`).first().replaceWith(g):h.append(g),!s&&i&&([r]=r,this.activeBoosters[r]=g)};t.normal.forEach(e=>{l(n,e)}),t.mythic.forEach(e=>{l(o,e)}),ws("header .currency").before(h),ws(document).on("boosters:equipped",(e,{id_item:t,id_m_i:a,isMythic:s})=>{const i=T.lsGet(f.BOOSTER_STATUS)||{normal:[],mythic:[]};var r=i[s?"mythic":"normal"].find(e=>e.id_item===t&&e.id_m_i.includes(a));r?h.find(`.slot.empty${s?".mythic":":not(.mythic)"}`).length?l(s?o:n,r,!0):console.log("somehow equipped a new equip but have no empty slot????"):console.log("can't find data in LS for new booster with idmi",a,"and itemid",t)}),ws(document).on("boosters:updated-mythic",()=>{const e=T.lsGet(f.BOOSTER_STATUS)||{normal:[],mythic:[]},a={};e.mythic.forEach(e=>a[e.id_m_i[0]]=e),Object.entries(this.activeBoosters).forEach(([e,t])=>{var s=a[e];if(s){var{usages:i,usages_remaining:e}=s;const r=Math.min(e/i,1);e=2*Math.min(r,.5),i=2*Math.max(r-.5,0);let a="green";0<r&&Object.entries($s).forEach(([e,t])=>{r<=e&&(a=t)});const n=t.find(".left .progress"),o=t.find(".right .progress");n.css("transform",`rotate(${180*i}deg)`).attr("class",`progress ${a}`),o.css("transform",`rotate(${180*e}deg)`).attr("class",`progress ${a}`);const l=t.find(".slot");l.attr("data-d",JSON.stringify(s)),l.data("d",s)}else t.find(".slot").attr("class","slot mythic empty").empty().attr("data-d","").attr("tooltip-id","").attr("id_item",""),t.find(".progress").css("transform","rotate(0deg)")})}),new MutationObserver(()=>{ws(".hh_tooltip_new:has(.script-tooltip)").addClass("script-booster-status-item")}).observe(document.body,{childList:!0})}};var Ts=_i(59),Es={};Ts.Z&&Ts.Z.locals&&(Es.locals=Ts.Z.locals);var Cs,Ls=0,Is={};Is.styleTagTransform=de(),Is.setAttributes=ge(),Is.insert=pe().bind(null,"head"),Is.domAPI=ce(),Is.insertStyleElement=ne(),Es.use=function(e){return Is.options=e||{},Ls++||(Cs=oe()(Ts.Z,Is)),Es},Es.unuse=function(){0<Ls&&!--Ls&&(Cs(),Cs=null)};const Ms=Es,As="seasonStats";const Rs=class extends n{constructor(){super({baseKey:As,label:wt.getModuleLabel("config",As),default:!0}),this.label=wt.getModuleLabel.bind(this,As)}shouldRun(){return T.isCurrentPage("season.html")||T.isCurrentPage("season-arena")}run(){!this.hasRun&&this.shouldRun()&&(Ms.use(),T.defer(()=>{var e,t,a,s,i=T.lsGet(f.SEASON_STATS);i&&({fights:s,victories:e,losses:t,won_mojo:a,lost_mojo:i}=i,s=`
            <span class="scriptSeasonStatsTooltip" style="visibility: visible;">
                <table>
                    <tbody>
                        <tr><td>${this.label("fights")} :</td><td>${s}</td></tr>
                        <tr><td>${this.label("victories")} :</td><td>${e}</td></tr>
                        <tr><td>${this.label("defeats")} :</td><td>${t}</td></tr>
                    </tbody>
                </table>
                <hr/>
                <table>
                    <tbody>
                        <tr><td>${this.label("mojoWon")} :</td><td>${a}</td></tr>
                        <tr><td>${this.label("mojoLost")} :</td><td>${i}</td></tr>
                    </tbody>
                </table>
                <hr/>
                <table>
                    <tbody>
                        <tr><td>${this.label("mojoWonAvg")} :</td><td>${wt.nRounding(a/Math.max(e,1),2,-1)}</td></tr>
                        <tr><td>${this.label("mojoLostAvg")} :</td><td>${wt.nRounding(i/Math.max(t,1),2,-1)}</td></tr>
                        <tr><td>${this.label("mojoAvg")} :</td><td>${wt.nRounding((a-i)/Math.max(s,1),2,-1)}</td></tr>
                    </tbody>
                </table>
            </span>
        `.replace(/( {4}|\n)/g,""),s=$('<span class="scriptSeasonStats">Stats</span>').attr("hh_title",s),(T.isCurrentPage("season.html")?$("div#seasons_tab_title"):$(".hero .hero_details .center_y")).append(s))}),this.hasRun=!0)}};var Ns=_i(774),Gs={};Ns.Z&&Ns.Z.locals&&(Gs.locals=Ns.Z.locals);var Ds,Ps=0,Os={};Os.styleTagTransform=de(),Os.setAttributes=ge(),Os.insert=pe().bind(null,"head"),Os.domAPI=ce(),Os.insertStyleElement=ne(),Gs.use=function(e){return Os.options=e||{},Ps++||(Ds=oe()(Ns.Z,Os)),Gs},Gs.unuse=function(){0<Ps&&!--Ps&&(Ds(),Ds=null)};const Hs=Gs,js="pachinkoNames";const Us=class extends n{constructor(){super({baseKey:js,label:wt.getModuleLabel("config",js),default:!0}),this.label=wt.getModuleLabel.bind(this,js)}shouldRun(){return T.isCurrentPage("pachinko")}run(){!this.hasRun&&this.shouldRun()&&(Hs.use(),T.defer(()=>{const s=T.getGirlDictionary();this.girlLists={},pachinkoDef.forEach(({type:e,content:t})=>{const a=t&&t.rewards&&t.rewards.girl_shards&&t.rewards.girl_shards.plain_data||[];t=a.map(({id_girl:e})=>s.get(e));this.girlLists[e]=t});const e=()=>{const e=new MutationObserver(()=>this.applyPanel());e.observe($(".playing-zone")[0],{attributes:!0}),this.applyPanel()};if($(".playing-zone").length)e();else{const t=new MutationObserver(()=>{$(".playing-zone").length&&(t.disconnect(),e())});t.observe($("#pachinko_whole")[0],{childList:!0})}}),this.hasRun=!0)}applyPanel(){var e=$(".playing-zone").attr("type-panel");const t=this.girlLists[e],a=T.isCxH(),s=T.$(`
            <div class="availableGirls rarity-styling">
                <div class="scrollArea">
                    ${t.length?this.label("availableGirls"):""}
                    ${t.map(e=>e?`<${a?"span":`a href="${T.getWikiLink(e.name)}" target="_blank"`} class="availableGirl ${e.rarity}-text">${e.name.replace(" "," ")}</${a?"span":"a"}>`:'<span class="unknownGirl">Unknown</a>').join(", ")}
                </div>
            </div>
        `);$(".game-rewards").before(s),s.niceScroll(".scrollArea",{bouncescroll:!1}),s.find(".nicescroll-rails-vr").css("right","5px")}};var zs=_i(673),Bs={};zs.Z&&zs.Z.locals&&(Bs.locals=zs.Z.locals);var Fs,qs=0,Zs={};Zs.styleTagTransform=de(),Zs.setAttributes=ge(),Zs.insert=pe().bind(null,"head"),Zs.domAPI=ce(),Zs.insertStyleElement=ne(),Bs.use=function(e){return Zs.options=e||{},qs++||(Fs=oe()(zs.Z,Zs)),Bs},Bs.unuse=function(){0<qs&&!--qs&&(Fs(),Fs=null)};const Vs=Bs,Ws="contestSummary";const Ks=class extends n{constructor(){super({baseKey:Ws,label:wt.getModuleLabel("config",Ws),default:!0}),this.label=wt.getModuleLabel.bind(this,Ws)}shouldRun(){return T.isCurrentPage("activities")}run(){!this.hasRun&&this.shouldRun()&&(Vs.use(),T.defer(()=>{this.displayRewardSums();const e=new MutationObserver(e=>{for(const t of e)"childList"===t.type&&this.displayRewardSums()});e.observe($(".left_part .scroll_area")[0],{attributes:!1,childList:!0,subtree:!1})}),this.hasRun=!0)}displayRewardSums(){const e=$(".over_bunny.over_panel"),a=$(".contest_header.ended .slot, .contest_header.ended .shards_girl_ico");let s={};function i(e){try{return wt.parseLocaleRoundedInt(e.getElementsByTagName("p")[0].innerText)}catch(e){return 1}}for(let t=0;t<a.length;t++){var r=a[t].children[0].attributes.getNamedItem("src"),r=`${a[t].className}${a[t].children[0].className}${r?r.value:""}`;try{s[r].amount+=i(a[t])}catch(e){s[r]={div:a[t].cloneNode(!0),amount:i(a[t])}}}this.$rewardsDisplay||(this.$rewardsDisplay=$('<div class="scriptRewardsDisplay"></div>'),e.append(this.$rewardsDisplay)),this.$rewardsDisplay.html(""),this.$rewardsDisplay.append(`<h3>${this.label("totalRewards",{contests:$(".contest .contest_header.ended").length})}</h3>`);for(const t in s){let e=s[t].div;try{e.getElementsByTagName("p")[0].remove()}catch(e){}e.innerHTML+=`<p>${e.className.includes("slot")?"":"X"}${wt.nRounding(s[t].amount,1,-1)}</p>`,e.className+=" reward_sum",e.className.includes("slot")||e.children[1].setAttribute("shards",`${wt.nRounding(s[t].amount,1,-1)}`),this.$rewardsDisplay.append(s[t].div)}this.$rewardsDisplay.append(`<br><br>${this.label("contestsWarning")}`)}},Ys="battleEndstate";const Xs=class extends n{constructor(){super({baseKey:Ys,label:wt.getModuleLabel("config",Ys),default:!0})}shouldRun(){return T.isCurrentPage("battle")&&!T.isCurrentPage("pre-battle")}run(){!this.hasRun&&this.shouldRun()&&(T.onAjaxResponse(/action=do_(league|season|troll|pantheon)_battles/i,e=>{T.isCurrentPage("troll-battle")&&~location.search.search(/number_of_battles=\d+/i)&&(a=parseInt(location.search.match(/number_of_battles=(\d+)/i)[1],10),$.isNumeric(a)&&Hero.update("energy_fight",-1*a,!0));var t=e.rounds;const f=$(".new-battle-player .new-battle-hero-ego-value").data("initialEgo"),b=$(".new-battle-opponent .new-battle-hero-ego-value").data("initialEgo");let y=0,v=0;var a=t.length;if(2<=a){e=[t[a-2],t[a-1]];v=e[1].opponent_hit?e[1].hero_hit?(y=t[a-1].opponent_hit.defender.remaining_ego,t[a-1].hero_hit.defender.remaining_ego):(y=e[1].opponent_hit.defender.remaining_ego,e[0].hero_hit.defender.remaining_ego):(y=e[0].opponent_hit.defender.remaining_ego,e[1].hero_hit.defender.remaining_ego)}else{if(1!==a)throw new Error("incorrect amount of rounds");v=t[0].opponent_hit?t[0].hero_hit?(y=t[0].opponent_hit.defender.remaining_ego,t[0].hero_hit.defender.remaining_ego):(y=t[0].opponent_hit.defender.remaining_ego,b):(y=f,t[0].hero_hit.defender.remaining_ego)}$("#new-battle-skip-btn").on("click",function(){var e=$(".new-battle-player .new-battle-hero-ego-initial-bar"),t=$(".new-battle-player .new-battle-hero-ego-damage-bar"),a=$(".new-battle-opponent .new-battle-hero-ego-initial-bar"),s=$(".new-battle-opponent .new-battle-hero-ego-damage-bar");const i=$(".new-battle-player .new-battle-hero-ego-value"),r=$(".new-battle-opponent .new-battle-hero-ego-value"),n=$(".new-battle-opponent .new-battle-hero-damage-taken-text"),o=$(".new-battle-player .new-battle-hero-damage-taken-text"),l=$(".new-battle-hero-container .new-battle-hero-critical-text");n.css("opacity","0"),o.css("opacity","0"),l.css("opacity","0");var c=i.text().split(GT.ego)[1].replace(/[, ]/g,"");let d=f;$.isNumeric(c)&&(d=parseInt(c));c=r.text().split(GT.ego)[1].replace(/[, ]/g,"");let p=b;$.isNumeric(c)&&(p=parseInt(c));const u=p-v,g=d-y;n.text(u.toString()),o.text(g.toString());const h=y<=0?0:y/f*100,m=v<=0?0:v/b*100;t=[{e:e,p:{width:h.toFixed(2)+"%"},o:{duration:200}},{e:t,p:{width:h.toFixed(2)+"%"},o:{duration:200}},{e:n,p:{opacity:[0,1],translateY:-20,translateZ:0},o:{duration:300,sequenceQueue:!1,complete:function(e){i.text(GT.ego+" "+y.toString()),$(e).velocity({translateY:0},0)}}}],s=[{e:a,p:{width:m.toFixed(2)+"%"},o:{duration:200}},{e:s,p:{width:m.toFixed(2)+"%"},o:{duration:200}},{e:o,p:{opacity:[0,1],translateY:-20,translateZ:0},o:{duration:300,sequenceQueue:!1,complete:function(e){r.text(GT.ego+" "+v.toString()),$(e).velocity({translateY:0},0)}}}];$(".velocity-animating").velocity("stop",!0),newBattles.setRounds([]),$.Velocity.RunSequence(t),$.Velocity.RunSequence(s)}),$("#new-battle-skip-btn").show()}),this.hasRun=!0)}};var Qs=_i(995),Js={};Qs.Z&&Qs.Z.locals&&(Js.locals=Qs.Z.locals);var ei,ti=0,ai={};ai.styleTagTransform=de(),ai.setAttributes=ge(),ai.insert=pe().bind(null,"head"),ai.domAPI=ce(),ai.insertStyleElement=ne(),Js.use=function(e){return ai.options=e||{},ti++||(ei=oe()(Qs.Z,ai)),Js},Js.unuse=function(){0<ti&&!--ti&&(ei(),ei=null)};const si=Js,ii="gemStock";const ri=class extends n{constructor(){super({baseKey:ii,label:wt.getModuleLabel("config",ii),default:!0}),this.label=wt.getModuleLabel.bind(this,ii)}shouldRun(){return T.isCurrentPage("shop")||T.isCurrentPage("harem")&&!T.isCurrentPage("hero")}buildGemsTable(){const e=Object.keys(Jt);return`
        <table class="gemStock-table">
            <tbody>
                ${e.map(e=>`
                    <tr>
                        <td><img src="${T.getCDNHost()}/pictures/design/gems/${e}.png"></td>
                        <td>${wt.nThousand(+player_gems_amount[e].amount)}</td>
                    </tr>
                `).join("")}
            </tody>
        </table>
    `.replace(/(\n| {4})/g,"")}buildGemsStockElem(){return $('<div class="gemStock"></div>').attr("hh_title",this.buildGemsTable())}run(){!this.hasRun&&this.shouldRun()&&(si.use(),T.defer(()=>{this.injectCSSVars();var e=this.buildGemsStockElem();let t;t=T.isCurrentPage("shop")?$("#shops_right #girls_list"):$("#harem_whole #harem_right"),t.prepend(e)}),this.hasRun=!0)}injectCSSVars(){re.registerVar("gem-stock-icon",`url('${T.getCDNHost()}/pictures/design/gems/all.png')`)}};var ue=class extends ue{constructor(e){super({group:"st",...e}),this.styles=e.styles}run(){this.shouldRun()&&!this.hasRun&&(this.styles.use(),this.hasRun=!0)}tearDown(){this.styles.unuse()}},ni=_i(433),oi={};ni.Z&&ni.Z.locals&&(oi.locals=ni.Z.locals);var li,ci=0,di={};di.styleTagTransform=de(),di.setAttributes=ge(),di.insert=pe().bind(null,"head"),di.domAPI=ce(),di.insertStyleElement=ne(),oi.use=function(e){return di.options=e||{},ci++||(li=oe()(ni.Z,di)),oi},oi.unuse=function(){0<ci&&!--ci&&(li(),li=null)};const pi=oi;const ui=class extends ue{constructor(){super({configSchema:{baseKey:"missionsBackground",default:!0,label:wt.getModuleLabel("stConfig","missionsBackground")},styles:pi})}shouldRun(){return T.isCurrentPage("activities")}};var gi=_i(348),hi={};gi.Z&&gi.Z.locals&&(hi.locals=gi.Z.locals);var mi,fi=0,bi={};bi.styleTagTransform=de(),bi.setAttributes=ge(),bi.insert=pe().bind(null,"head"),bi.domAPI=ce(),bi.insertStyleElement=ne(),hi.use=function(e){return bi.options=e||{},fi++||(mi=oe()(gi.Z,bi)),hi},hi.unuse=function(){0<fi&&!--fi&&(mi(),mi=null)};const yi=hi;const vi=class extends ue{constructor(){super({configSchema:{baseKey:"collectMoneyAnimation",default:!0,label:wt.getModuleLabel("stConfig","collectMoneyAnimation")},styles:yi})}shouldRun(){return T.isCurrentPage("harem")}};$?"/"===location.pathname&&location.hostname.includes("www")||("/integrations/"===location.pathname&&location.hostname.includes("nutaku")?location.replace(`${location.origin}/home.html`):(()=>{const e=new xe;C.collect(),L.collect(),M.collect(),N.collect(),B.collect(),Z.collect(),K.collect(),Q.collect(),J.collect(),te.collect(),e.registerGroup({key:"core",name:`${T.getGameKey()}++ Core`}),e.registerModule(new Mt),e.registerModule(new Ht),e.registerModule(new Kt),e.registerModule(new ca),e.registerModule(new ka),e.registerModule(new Ga),e.registerModule(new Fa),e.registerModule(new is),e.registerModule(new gs),e.registerModule(new ks),e.registerModule(new Rs),e.registerModule(new Us),e.registerModule(new Ks),e.registerModule(new Xs),e.registerModule(new ri),e.registerGroup({key:"st",name:"Style Tweaks",iconEl:"<div></div>"}),e.registerModule(new ui),e.registerModule(new vi),e.loadConfig(),e.runModules(),T.runDeferred(),window.hhPlusPlusConfig={registerGroup:e.registerGroup.bind(e),registerModule:e.registerModule.bind(e),runModules:e.runModules.bind(e),loadConfig:e.loadConfig.bind(e)}})()):console.log("HH++ WARNING: No jQuery found. Probably an error page. Ending the script here")})()})();